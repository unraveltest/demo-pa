<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta charset="UTF-8"></meta><meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="no"></meta><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700|Material+Icons" rel="stylesheet"></link><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			
					var local_csh = false;
				
			var useanchorlinks = false;
			</script><title>Hortonworks Data Platform (HDP)</title><link rel="stylesheet" type="text/css" href="../../../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../../../css/bootstrap.min.css"></link><link rel="stylesheet" type="text/css" href="../../../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../../../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../../../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../../../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../../../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../../../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../../../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../../../css/graphical-lists.css"></link><script src="../../../js/jquery-3/jquery-3.3.1.min.js" type="text/javascript"></script><script src="../../../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../../../js/materialize.min.js" type="text/javascript"></script><script src="../../../js/bootstrap.min.js" type="text/javascript"></script><script src="../../../js/purl.js" type="text/javascript"></script><script src="../../../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../../../js/html5-2.js" type="text/javascript"></script><script src="../../../js/clipboard.min.js" type="text/javascript"></script><script src="../../../js/fuse.min.js" type="text/javascript"></script><script src="../../../js/hilitor.js" type="text/javascript"></script><script src="../../../js/html5.fuse.search.js" type="text/javascript"></script><script src="../../js/fuzzydata.js" type="text/javascript"></script><script src="../../../js/csh.js" type="text/javascript"></script><meta xmlns:xlink="http://www.w3.org/1999/xlink" name="generator" content="Paligo"></meta><link rel="prev" href="cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-.html" title="Cloudera Distribution Including Apache Hadoop (CDH), with Cloudera Manager (CM)"></link><link rel="next" href="mapr.html" title="MapR"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><script>
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				$('.materialboxed').materialbox();
				});
			</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/googlecode.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/highlight.min.js"></script><script type="text/javascript">
				$(document).ready(function(){
				$('pre').each(function(i, block) {
				hljs.highlightBlock(block);
				});
				});
			</script></head><body class="theme1" data-link-prefix="../../"><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../../../index.html?lang=en"><img id="logotype-pageheader" src="../../../css/image/corporate-logo.svg" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href="#">Topnav item</a></li><li><a href="#">Topnav item 2</a></li><li><a href="#">Topnav item 3</a></li></ul></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><a href="../../../index.html?lang=en"><img id="logotype-pageheader" src="../../../css/image/corporate-logo.svg" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><ul class="toc nav nav-site-sidebar"><li><a href="../../unravel-4-3.html" class="topic-link section original-topic" data-origin-id="UUID-ad4faae7-0575-21de-ae5b-a25189b2119c" data-permalink="unravel-4-3.html" data-topic-level="1" data-relative-prefix=""><span class="glyphicon"></span> Unravel 4.3</a><ul><li><a href="../../unravel-4-3.html#UUID-cf26a2d6-427f-5e20-e5d4-d09fdc2c4890_id_Unravel43-ThisDocumentationisforUnravelVersion43" class="topic-link section internal" data-origin-id="">This Documentation is for Unravel Version 4.3</a></li><li><a href="../../unravel-4-3/overview.html" class="topic-link section original-topic" data-origin-id="UUID-79e407a7-688a-42d4-5a12-d4183b8bd5b0" data-permalink="unravel-4-3/overview.html" data-topic-level="2" data-relative-prefix="../"><span class="glyphicon"></span> Overview</a><ul><li><a href="../../unravel-4-3/overview.html#UUID-736e9383-473a-f9b3-aa12-2fbf7e7a1fd9_id_Overview-WhereDoesUnravelServerReside" class="topic-link section internal" data-origin-id="">Where Does Unravel Server Reside?</a></li><li><a href="../../unravel-4-3/overview.html#UUID-736e9383-473a-f9b3-aa12-2fbf7e7a1fd9_id_Overview-WhatDoesaBasicDeploymentProvide" class="topic-link section internal" data-origin-id="">What Does a Basic Deployment Provide?</a></li><li><a href="../../unravel-4-3/overview.html#UUID-736e9383-473a-f9b3-aa12-2fbf7e7a1fd9_id_Overview-WhatAreAdvancedDeploymentOptions" class="topic-link section internal" data-origin-id="">What Are Advanced Deployment Options?</a></li></ul></li><li><a href="../../unravel-4-3/installation-guides.html" class="topic-link section original-topic" data-origin-id="UUID-27409536-9797-9e9a-4a94-0464bea9f853" data-permalink="unravel-4-3/installation-guides.html" data-topic-level="2" data-relative-prefix="../"><span class="glyphicon"></span> Installation Guides</a><ul><li><a href="../../unravel-4-3/installation-guides/cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-.html" class="topic-link section original-topic" data-origin-id="UUID-b0e75fdf-00ff-9f98-2d49-44380e8470b2" data-permalink="unravel-4-3/installation-guides/cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-.html" data-topic-level="3" data-relative-prefix="../../">Cloudera Distribution Including Apache Hadoop (CDH), with Cloudera Manager (CM)</a></li><li><a href="../../unravel-4-3/installation-guides/hortonworks-data-platform--hdp-.html" class="topic-link section original-topic" data-origin-id="UUID-35ff77fc-e768-55bd-118a-21a5a8eabdf5" data-permalink="unravel-4-3/installation-guides/hortonworks-data-platform--hdp-.html" data-topic-level="3" data-relative-prefix="../../">Hortonworks Data Platform (HDP)</a></li><li><a href="../../unravel-4-3/installation-guides/mapr.html" class="topic-link section original-topic" data-origin-id="UUID-86b32cb8-0df7-079d-2a9c-0ade3a4fa4a0" data-permalink="unravel-4-3/installation-guides/mapr.html" data-topic-level="3" data-relative-prefix="../../">MapR</a></li></ul></li><li><a href="../../unravel-4-3/user-guide.html" class="topic-link section original-topic" data-origin-id="UUID-881209c5-e7cc-2205-b4a2-1d2b9d1a231f" data-permalink="unravel-4-3/user-guide.html" data-topic-level="2" data-relative-prefix="../"><span class="glyphicon"></span> User Guide</a><ul><li><a href="../../unravel-4-3/user-guide/getting-started.html" class="topic-link section original-topic" data-origin-id="UUID-617a6a3f-b72d-3605-1807-5f307b05320e" data-permalink="unravel-4-3/user-guide/getting-started.html" data-topic-level="3" data-relative-prefix="../../">Getting Started</a></li><li><a href="../../unravel-4-3/user-guide/common-ui-features.html" class="topic-link section original-topic" data-origin-id="UUID-f20f4ecd-6c33-d07f-67cf-020ef8a6a21f" data-permalink="unravel-4-3/user-guide/common-ui-features.html" data-topic-level="3" data-relative-prefix="../../">Common UI Features</a></li><li><a href="../../unravel-4-3/user-guide/auto-actions.html" class="topic-link section original-topic" data-origin-id="UUID-b985bbe7-0d13-0640-b319-564240760706" data-permalink="unravel-4-3/user-guide/auto-actions.html" data-topic-level="3" data-relative-prefix="../../">Auto Actions</a></li></ul></li><li><a href="../../unravel-4-3/advanced-topics.html" class="topic-link section original-topic" data-origin-id="UUID-c677c0ff-a929-c9c6-1093-78155532b704" data-permalink="unravel-4-3/advanced-topics.html" data-topic-level="2" data-relative-prefix="../">Advanced Topics</a></li><li><a href="../../unravel-4-3/troubleshooting.html" class="topic-link section original-topic" data-origin-id="UUID-ebe9fdd5-3059-536a-88fd-cfdf17fbc6af" data-permalink="unravel-4-3/troubleshooting.html" data-topic-level="2" data-relative-prefix="../">Troubleshooting</a></li><li><a href="../../unravel-4-3/appendices.html" class="topic-link section original-topic" data-origin-id="UUID-b4f8bb84-90d1-537f-04dc-529a76089c3d" data-permalink="unravel-4-3/appendices.html" data-topic-level="2" data-relative-prefix="../">Appendices</a></li><li><a href="../../unravel-4-3/release-notes.html" class="topic-link section original-topic" data-origin-id="UUID-a91983de-6c9c-f9ec-477f-5acda3716abb" data-permalink="unravel-4-3/release-notes.html" data-topic-level="2" data-relative-prefix="../">Release Notes</a></li></ul></li></ul></aside><div class="site-content"><h1 class="publication-title">UN43 (Unravel 4.3)</h1><div class="toolbar"><div class="toolbar-tools"><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="../../index-en.html">UN43 (Unravel 4.3)</a></li><li class="breadcrumb-link"><a href="../../unravel-4-3.html">Unravel 4.3</a></li><li class="breadcrumb-link"><a href="../installation-guides.html">Installation Guides</a></li><li class="breadcrumb-node">Hortonworks Data Platform (HDP)</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="mapr.html">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" dir="ltr" class="section original-topic" data-origin-id="UUID-35ff77fc-e768-55bd-118a-21a5a8eabdf5" data-permalink="unravel-4-3/installation-guides/hortonworks-data-platform--hdp-.html" data-topic-level="3" data-relative-prefix="../../" id="UUID-a320d06e-3095-d1ae-65b3-e6bcb5251131"><div class="titlepage"><div><div class="title"><h4 class="title">Hortonworks Data Platform (HDP)</h4></div></div></div><div dir="ltr" class="tip"><h3 class="title">Tip</h3><p>This guide is compatible with:</p><div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem"><p>HDP 2.2-2.6</p></li></ul></div></div><section dir="ltr" class="section internal" data-origin-id="" id="UUID-a320d06e-3095-d1ae-65b3-e6bcb5251131_id_HortonworksDataPlatformHDP-OrderedSteps"><div class="titlepage"><div><div class="title"><h5 class="title">Ordered Steps</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57" title="Step 1: Install Unravel Server on HDP">Step 1: Install Unravel Server on HDP</a>
              </p></li><li class="listitem"><p>
                <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-a2bcddfc-ab84-a4dd-dc7f-130c72d54ecb" title="Step 2: Enable Additional Data Collection / Instrumentation for HDP">Step 2: Enable Additional Data Collection / Instrumentation
for HDP</a>
              </p></li></ul></div></section><section xml:lang="en" dir="ltr" class="section original-topic" data-origin-id="UUID-7c2871c3-30cc-1982-266d-43ece08fe9d7" id="UUID-18633110-9981-9339-796a-55c4fc3aeb57"><div class="titlepage"><div><div class="title"><h5 class="title">Step 1: Install Unravel Server on HDP</h5></div></div></div><p>
          <span class="bold"><strong>Table of Contents</strong></span>
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-Introduction" title="Introduction">Introduction</a>
            </p></li><li class="listitem"><p>
              <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-Pre-InstallationCheck" title="Pre-Installation Check">Pre-Installation
Check</a>
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-PlatformCompatibility" title="Platform Compatibility">Platform
Compatibility</a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-Hardware" title="Hardware">Hardware</a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-Software" title="Software">Software</a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-AccessPermissions" title="Access Permissions">Access
Permissions</a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-Network" title="Network">Network</a>
                </p></li></ul></div></li><li class="listitem"><p>
              <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-1ConfiguretheHostMachine" title="1. Configure the Host Machine">1.
Configure the Host Machine</a>
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-AllocateaClusterGatewayEdgeClientHostwithHDFSAccess" title="Allocate a Cluster Gateway/Edge/Client Host with HDFS Access">
Allocate a Cluster Gateway/Edge/Client Host with HDFS
Access</a>
                </p></li></ul></div></li><li class="listitem"><p>
              <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-2InstalltheUnravelServerRPMontheHostMachine" title="2. Install the Unravel Server RPM on the Host Machine">
2. Install the Unravel Server RPM on the Host Machine</a>
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-GettheUnravelServerRPM" title="Get the Unravel Server RPM">Get the
Unravel Server RPM</a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-Makesymlinksifrequired" title="Make symlinks if required">Make
symlinks if required</a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-InstalltheUnravelServerRPM" title="Install the Unravel Server RPM">Install
the Unravel Server RPM</a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-DoHost-SpecificPost-InstallationActions" title="Do Host-Specific Post-Installation Actions">
Do Host-Specific Post-Installation Actions</a>
                </p></li></ul></div></li><li class="listitem"><p>
              
3. Configure Unravel Server (Basic/Core Options)
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-EnableOptionalDaemons" title="Enable Optional Daemons">Enable
Optional Daemons</a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-Modifyunravelproperties" title="Modify unravel.properties">Modify
unravel.properties</a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-IfKerberosisEnabled" title="If Kerberos is Enabled:">If Kerberos
is Enabled:</a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-IfRangerisEnabled" title="If Ranger is Enabled:">If Ranger is
Enabled:</a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-DisableImpalaSensor" title="Disable Impala Sensor:">Disable
Impala Sensor:</a>
                </p></li></ul></div></li><li class="listitem"><p>
              <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-4ConvertYourUnravelInstallationtoHDP" title="4. Convert Your Unravel Installation to HDP">
4. Convert Your Unravel Installation to HDP</a>
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-RunthefollowingcommandsonUnravelServer" title="Run the following commands on Unravel Server:">
Run the following commands on Unravel Server:</a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-SwitchUser" title="Switch User">Switch
User</a>
                </p></li><li class="listitem"><p>
                  <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-RestartUnravelServer" title="Restart Unravel Server">Restart
Unravel Server</a>
                </p></li></ul></div></li><li class="listitem"><p>
              <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-5LogintoUnravelWebUI" title="5. Log into Unravel Web UI">5. Log
into Unravel Web UI</a>
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-Congratulations" title="Congratulations!">Congratulations!</a>
                </p></li></ul></div></li><li class="listitem"><p>
              
6. Configure Unravel Server (Advanced Options)
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-EnableAdditionalDataCollectionInstrumentation" title="Enable Additional Data Collection/Instrumentation">
Enable Additional Data Collection/Instrumentation</a>
                </p></li></ul></div></li></ul></div><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-Introduction" class="bridgehead">Introduction</h6><p>This topic explains how to
deploy Unravel Server 4.0 on HDP. These instructions
apply to Unravel Server 4.0. For older versions of Unravel Server,
contact Unravel Support.</p><p>
          <span class="bold"><strong>Workflow Summary</strong></span>
        </p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Pre-installation check</p></li><li class="step"><p>Configure the host machine.</p></li><li class="step"><p>Install the Unravel Server RPM on the host machine.</p></li><li class="step"><p>Configure Unravel Server (basic/core options).</p></li><li class="step"><p>Log into Unravel Web UI.</p></li><li class="step"><p>(Optional) Configure Unravel Server (advanced options).</p></li></ol></div><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-Pre-InstallationCheck" class="bridgehead">Pre-Installation Check</h6><p>The following installation requirements must be met for
successful installation of Unravel.</p><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-PlatformCompatibility" class="bridgehead">Platform Compatibility</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>HDP 2.2-2.6</p></li><li class="listitem"><p>Hadoop 1.x - 2.x</p></li><li class="listitem"><p>Kafka 0.9-1.0 (Apache ver. equiv.)</p></li><li class="listitem"><p>Kerberos</p></li><li class="listitem"><p>Hive 0.9.x - 1.2.x</p></li><li class="listitem"><p>Spark 1.3.x - 2.2.x</p></li></ul></div><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-Hardware" class="bridgehead">Hardware</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Architecture: x86_64</p></li><li class="listitem"><p>Cores: 8</p></li><li class="listitem"><p>RAM: 64GB minimum, 128GB for medium volume (&gt;25,000 jobs per
day), 256GB for high volume (&gt;50,000 jobs per day)</p></li><li class="listitem"><p>Disk: <code class="code">/usr/local/unravel</code> with 8GB free minimum
(can be symlink)</p></li><li class="listitem"><p>Disk: <code class="code">/srv/unravel</code> with 500GB free minimum (can be
symlink)</p></li><li class="listitem"><p>For 60,000+ MR jobs per day, two or more gateway/edge nodes are
recommended ("multi-host Unravel")</p></li></ul></div><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-Software" class="bridgehead">Software</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Operating System: RedHat/Centos 6.4 - 7.4</p></li><li class="listitem"><p><code class="code">libaio.x86_64</code> installed</p></li><li class="listitem"><p><code class="code">SELINUX=permissive</code> (or disabled) should be set in
<code class="code">/etc/selinux/config</code></p></li><li class="listitem"><p>HDFS+Hive+YARN client/gateway, Hadoop and Hive commands in
<code class="code">PATH</code></p></li><li class="listitem"><p>If Spark is in use, Spark client gateway</p></li><li class="listitem"><p>You need to register edge node to Ambari </p></li><li class="listitem"><p>LDAP (AD or Open LDAP) compatible for Unravel Web UI user
authentication (Open signup by default)</p></li><li class="listitem"><p>On Unravel Edge-node server, please <span class="bold"><strong><span class="underline">do
not</span></strong></span> have zookeeper installed in same server</p></li></ul></div><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-AccessPermissions" class="bridgehead">Access Permissions</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>If Kerberos is in use, a keytab for principal is required for
access to:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Access to YARN’s “done dir” in HDFS</p></li><li class="listitem"><p>Access to YARN’s log aggregation directory in HDFS</p></li><li class="listitem"><p>Access to Spark event log directory in HDFS</p></li><li class="listitem"><p>Access to file sizes under HIve warehouse directory</p></li></ul></div></li><li class="listitem"><p>Access to YARN Resource Manager REST API</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>principal needs right to find out which RM is active</p></li></ul></div></li><li class="listitem"><p>JDBC access to the Hive Metastore (read-only user is
sufficient)</p></li><li class="listitem"><p>Application Timeline Server (ATS)
read-only</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>The RUN_AS user must be
included in yarn.admin.acl and
<a class="link" href="http://tez.am" target="_blank">tez.am</a>.view-acls, either as a separate user or as a member of
a group, if</p><div class="itemizedlist"><ul style="list-style-type: circle; " class="itemizedlist"><li class="listitem"><p>the cluster uses  kerberos
for authentication or</p></li><li class="listitem"><p>the resource manager has
been configured in high availability mode, </p></li></ul></div></div></li></ul></div><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-Network" class="bridgehead">Network</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Port 3000 from users and entire cluster to Unravel Web UI</p></li><li class="listitem"><p>HDFS ports open from Hadoop cluster to Unravel Server(s)</p></li><li class="listitem"><p>For YARN, Hive Metadata DB port open to Unravel Server(s) for
partition reporting</p></li><li class="listitem"><p>UDP and TCP port 4043 open from entire cluster to Unravel
Server(s)</p></li><li class="listitem"><p>For Oozie, port 11000 open from Unravel Server(s) to the Oozie
server</p></li><li class="listitem"><p>Resource Manager (RM) port 8032 from Unravel Server(s) to the
RM server(s)</p></li><li class="listitem"><p>ATS port 8188 from Unravel Servers(s) to ATS server(s)</p></li><li class="listitem"><p>Port 4020, 4176, 4181 through 4189, 3316, 4091 must be
available for localhost communication between Unravel daemons
or Unravel servers (if multi-host Unravel
installation)</p></li></ul></div><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-1ConfiguretheHostMachine" class="bridgehead">1. Configure the Host Machine</h6><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-AllocateaClusterGatewayEdgeClientHostwithHDFSAccess" class="bridgehead">Allocate a Cluster Gateway/Edge/Client Host with HDFS Access</h6><p>For HDP, use Ambari Web UI to
create a Gateway node configuration.</p><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-2InstalltheUnravelServerRPMontheHostMachine" class="bridgehead">2. Install the Unravel Server RPM on the Host Machine</h6><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-GettheUnravelServerRPM" class="bridgehead">Get the Unravel Server RPM</h6><p>See <a class="link" href="https://unraveldata.atlassian.net/wiki/spaces/UNDOCS/pages/226132074/Download+Unravel+Software+Versions" target="_blank">Download Unravel
Software</a>.</p><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-Makesymlinksifrequired" class="bridgehead">Make symlinks if required</h6><p>If you want the two disk areas used by Unravel to be on
different volumes, you can make symlinks to specific areas before
installing (or do
a <code class="code">mv</code> and <code class="code">symlink</code> symlink after
installing). Do it before the first install if there is
insufficient space on the target
paths <code class="code">/usr/local/unravel</code>
and <code class="code">/srv/unravel</code> noted above. </p><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-InstalltheUnravelServerRPM" class="bridgehead">Install the Unravel Server RPM</h6><pre class="programlisting"># sudo rpm -U unravel-4.*.x86_64.rpm*
# /usr/local/unravel/install_bin/await_fixups.sh</pre><p>The precise filename can vary,
depending on how it was fetched or copied. The
<code class="code">rpm</code> command does not require .<code class="code">rpm</code> suffix.
The flag <code class="code">-U</code> works for either initial install or
upgrade.</p><p>Run the
specified <code class="code">await_fixups.sh</code> script to make sure
background processing is finished before you do other steps. In a
routine upgrade, it is okay to start all Unravel daemons, but do
not stop or restart them until
the <code class="code">await_fixups.sh</code> prints <code class="code">Done</code> (it takes
a few minutes).</p><p>The installation creates <code class="code">/usr/local/unravel/</code> which
contains the executables, scripts, and settings.
User <code class="code">unravel</code> is created. The initial internal database
and other durable state are put in <code class="code">/srv/unravel/</code> for
larger storage. By default, the installation supports
YARN.</p><p>
The master configuration file is
in <code class="code">/usr/local/unravel/etc/unravel.properties</code> and the
logs are in <code class="code">/usr/local/unravel/logs/</code>. The RPM
installation creates user <code class="code">unravel</code> if it does not
already exist; <code class="code">/etc/init.d/unravel_*</code> scripts for
controlling its services as well
as <code class="code">/etc/init.d/unravel_all.sh</code> which can be used to
manually stop, start, and get status of all daemons in proper
order.</p><p>
The RPM installation also creates an HDFS directory for Hive Hook
information collection.</p><p>
During initial install, a bundled database is used. This can be
switched to use an externally managed MySQL for production. (The
bundled database root mysql password will be stored
in <code class="code">/root/unravel.install.include</code> during
installation.)</p><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-DoHost-SpecificPost-InstallationActions" class="bridgehead">Do Host-Specific Post-Installation Actions</h6><p>For HDP, there are no
host-specific post-installation actions.</p><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-3ConfigureUnravelServerBasicCoreOptions" class="bridgehead">3. Configure Unravel Server (Basic/Core Options)</h6><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-EnableOptionalDaemons" class="bridgehead">Enable Optional Daemons</h6><p>Depending on your workload volume or kind of activity, you can
enable optional daemons at this point. See <a class="link" href="https://unraveldata.atlassian.net/wiki/spaces/UN43/pages/226296004/Creating+Multiple+Workers+for+High+Volume+Data" target="_blank">Creating Multiple Workers for
High Volume Data</a>.</p><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-Modifyunravelproperties" class="bridgehead">Modify unravel.properties</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Open <code class="code">/usr/local/unravel/etc/unravel.properties</code>
with <code class="code">vi</code>.</p><pre class="programlisting">
# sudo vi /usr/local/unravel/etc/unravel.properties</pre></li><li class="listitem"><p>Edit the values in <code class="code">unravel.properties</code> using
the guidelines and descriptions in the table below.</p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup>
                <col></col>
                <col></col>
                <col></col>
              </colgroup><thead><tr>
                  <th class="th">
                    <p>Property</p>
                  </th>
                  <th class="th">
                    <p>Description</p>
                  </th>
                  <th class="th">
                    <p>Example Values</p>
                  </th>
                </tr></thead><tbody><tr>
                  <td class="td">
                    <p>
                      <code class="code">com.unraveldata.advertised.url</code>
                    </p>
                  </td>
                  <td class="td">
                    <p>Defines the Unravel Server URL
for HTTP traffic.</p>
                  </td>
                  <td class="td">
                    <p>
                      <code class="code">http://LAN_DNS:3000</code>
                    </p>
                  </td>
                </tr><tr>
                  <td class="td">
                    <p>
                      <code class="code">com.unraveldata.customer.organization</code>
                    </p>
                  </td>
                  <td class="td">
                    <p>Identifies your installation
for reporting purposes.</p>
                  </td>
                  <td class="td">
                    <p>
                      <code class="code">Company_and_org</code>
                    </p>
                  </td>
                </tr><tr>
                  <td class="td">
                    <pre class="programlisting">com.unraveldata.tmpdir</pre>
                  </td>
                  <td class="td">
                    <p>Location where Unravel's temp
file will reside</p>
                  </td>
                  <td class="td">
                    <pre class="programlisting">/srv/unravel/tmp</pre>
                  </td>
                </tr><tr>
                  <td class="td">
                    <p>
                      <code class="code">com.unraveldata.history.maxSize.weeks</code>
                    </p>
                  </td>
                  <td class="td">
                    <p>Sets retention for search
data.</p>
                  </td>
                  <td class="td">
                    <p>
                      <code class="code">26</code>
                    </p>
                  </td>
                </tr><tr>
                  <td class="td">
                    <p>
                      <code class="code">com.unraveldata.job.collector.done.log.base</code>
                    </p>
                  </td>
                  <td class="td">
                    <p>Only modifiable through Unravel Web UI's
configuration wizard.</p>
                  </td>
                  <td class="td">
                    <pre class="programlisting">/mr-history/done</pre>
                  </td>
                </tr><tr>
                  <td class="td">
                    <p>
                      <code class="code">com.unraveldata.job.collector.log.aggregation.base</code>
                    </p>
                  </td>
                  <td class="td">
                    <p>Only modifiable through Unravel Web UI's
configuration wizard.</p>
                  </td>
                  <td class="td">
                    <pre class="programlisting">/app-logs/*/logs/</pre>
                  </td>
                </tr><tr>
                  <td class="td">
                    <p>
                      <code class="code">com.unraveldata.login.admins</code>
                    </p>
                  </td>
                  <td class="td">
                    <p>Defines the usernames that can
access Unravel Web UI's admin pages. Default is
<code class="code">admin</code>.</p>
                  </td>
                  <td class="td">
                    <p>
                      <code class="code">admin</code>
                    </p>
                  </td>
                </tr><tr>
                  <td class="td">
                    <p>
                      <code class="code">com.unraveldata.s3.batch.monitoring.interval.sec</code>
                    </p>
                  </td>
                  <td class="td">
                    <p><span class="bold"><strong>Optional</strong></span>.
Defines the monitoring frequency. Default is 300 seconds (5
minutes). Set this property to 60 for lower latency.</p>
                  </td>
                  <td class="td">
                    <p>
                      <code class="code">120</code>
                    </p>
                  </td>
                </tr><tr>
                  <td class="td">
                    <p>
                      <code class="code">com.unraveldata.spark.eventlog.location</code>
                    </p>
                  </td>
                  <td class="td">
                    <p>Where to find Spark event
logs</p>
                  </td>
                  <td class="td">
                    <pre class="programlisting">
hdfs:///user/spark/applicationHistory/,hdfs:///user/spark/sparkApplicationHistory/,hdfs:///user/spark/spark2ApplicationHistory/</pre>
                  </td>
                </tr><tr>
                  <td class="td">
                    <p>
                      <code class="code">yarn.resourcemanager.webapp.address</code>
                    </p>
                  </td>
                  <td class="td">
                    <p>YARN resource manager
web address URL</p>
                  </td>
                  <td class="td">
                    <pre class="programlisting">http://example.localdomain:8088</pre>
                  </td>
                </tr><tr>
                  <td class="td">
                    <p>
                      <code class="code">oozie.server.url</code>
                    </p>
                  </td>
                  <td class="td">
                    <p>Oozie URL</p>
                  </td>
                  <td class="td">
                    <pre class="programlisting">http://example.localdomain:11000/oozie</pre>
                  </td>
                </tr></tbody></table></div><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-IfKerberosisEnabled" class="bridgehead">If
Kerberos is Enabled:</h6><div class="mediaobject"><img src="../../image/15c3fbafa0a483.png" alt="grey_arrow_down.png"></img></div><p>Add authentication for HDFS...</p><p>Create or identify a principal and keytab for Unravel daemons to
access HDFS and REST when Kerberos is enabled. </p><p>Add properties for Kerberos in <code class="code">/usr/local/unravel/etc/unravel.properties</code>
(substitute correct filename and principal):</p><pre class="programlisting">
com.unraveldata.kerberos.principal=unravel/myhost.mydomain@MYREALM
com.unraveldata.kerberos.keytab.path=/usr/local/unravel/etc/unravel.keytab</pre><p>You can verify the principal in a
keytab by using <code class="code">properties klist -kt
KEYTAB_FILE</code><span class="italic">.</span> The keytab file
should have chmod bits 500 and be owned by 'unravel' local user
(default) or by the user you want to use, as explained in <a class="link" href="https://unraveldata.atlassian.net/wiki/spaces/UN43/pages/233832670/Run+Unravel+Daemons+with+Custom+User" target="_blank">Run Unravel Daemons with
Custom User</a>.</p><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-IfRangerisEnabled" class="bridgehead">If
Ranger is Enabled:</h6><div class="mediaobject"><img src="../../image/15c3fbafa0a483.png" alt="grey_arrow_down.png"></img></div><p>Add these permissions...</p><p>Define your own alt principal with
narrow privileges. The alt principal can be <code class="code">unravel</code> (created
by <code class="code">rpm</code>) or one
of your choosing. The corresponding kerberos principal does not
need to have the same name as the local user. The user/principal
here should correspond to the <code class="code">X</code>  in the
switch-user section below. </p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup>
                <col></col>
                <col></col>
                <col></col>
                <col></col>
              </colgroup><thead><tr>
                  <th class="th">
                    <p>Resource</p>
                  </th>
                  <th class="th">
                    <p>Principal</p>
                  </th>
                  <th class="th">
                    <p>Access</p>
                  </th>
                  <th class="th">
                    <p>Purpose</p>
                  </th>
                </tr></thead><tbody><tr>
                  <td class="td">
                    <p>
                      <code class="code">hdfs://spark-history</code>
                    </p>
                  </td>
                  <td class="td">
                    <p>Your alt principal</p>
                  </td>
                  <td class="td">
                    <p>read+execute</p>
                  </td>
                  <td class="td">
                    <p>Spark event log</p>
                  </td>
                </tr><tr>
                  <td class="td">
                    <p>hdfs://spark2-history</p>
                  </td>
                  <td class="td">
                    <p>Your alt principal</p>
                  </td>
                  <td class="td">
                    <p>read+execute</p>
                  </td>
                  <td class="td">
                    <p>Spark2 event log</p>
                  </td>
                </tr><tr>
                  <td class="td">
                    <p>
                      <code class="code">hdfs://mr-history/done</code>
                    </p>
                  </td>
                  <td class="td">
                    <p>Your alt
principal</p>
                  </td>
                  <td class="td">
                    <p>read+execute</p>
                  </td>
                  <td class="td">
                    <p>MapReduce logs</p>
                  </td>
                </tr><tr>
                  <td class="td">
                    <p>
                      <code class="code">hdfs://app-logs</code>
                    </p>
                  </td>
                  <td class="td">
                    <p>Your alt
principal</p>
                  </td>
                  <td class="td">
                    <p>read+execute</p>
                  </td>
                  <td class="td">
                    <p>YARN aggregation folder</p>
                  </td>
                </tr><tr>
                  <td class="td">
                    <p>
                      <code class="code">hdfs://apps/hive/warehouse (default value
of hive.metastore.warehouse.dir)</code>
                    </p>
                  </td>
                  <td class="td">
                    <p>Your alt
principal</p>
                  </td>
                  <td class="td">
                    <p>read+execute</p>
                  </td>
                  <td class="td">
                    <p>Obtain table partition
sizes</p>
                  </td>
                </tr><tr>
                  <td class="td">
                    <p>Hive Metastore database
GRANT</p>
                  </td>
                  <td class="td">
                    <p>hive</p>
                  </td>
                  <td class="td">
                    <p>read+execute</p>
                  </td>
                  <td class="td">
                    <p>Hive table information</p>
                  </td>
                </tr></tbody></table></div><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-DisableImpalaSensor" class="bridgehead">
Disable Impala Sensor:</h6><div dir="ltr" class="note"><h3 class="title">Note</h3><p>Impala is not officially supported on HDP clusters therefore you
should disable the  ImpalaSensor by modifying
the <code class="code">/usr/local/unravel/etc/unravel.properties</code> file
on Unravel Server:</p></div><p>
Open <code class="code">unravel.properties </code>file.  Locate or
add <code class="code">com.unraveldata.sensor.tasks.disabled</code> 
and set it as shown:</p><pre class="programlisting">com.unraveldata.sensor.tasks.disabled=iw</pre></li></ul></div><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-4ConvertYourUnravelInstallationtoHDP" class="bridgehead">4. Convert Your Unravel Installation to HDP</h6><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-RunthefollowingcommandsonUnravelServer" class="bridgehead">Run the following commands on Unravel Server:</h6><pre class="programlisting"># sudo /etc/init.d/unravel_all.sh stop
# sudo /usr/local/unravel/install_bin/switch_to_hdp.sh</pre><div dir="ltr" class="note"><h3 class="title">Note</h3><p>Note: This change
will stick after later RPM upgrades; it does not need to be done
each time.</p></div><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-SwitchUser" class="bridgehead">Switch User</h6><p>Depending on your cluster security configuration, you will need
to run the <a class="link" href="https://unraveldata.atlassian.net/wiki/spaces/UN43/pages/233832670/Run+Unravel+Daemons+with+Custom+User" target="_blank">switch_to_user</a> script.
Dependencies like kerberos and which target user you used for
Ranger affect this. </p><pre class="programlisting">
# sudo /usr/local/unravel/install_bin/switch_to_user.sh x y </pre><p>where <code class="code">X</code>  and <code class="code">Y</code> depend
on your environment. See <a class="link" href="https://unraveldata.atlassian.net/wiki/spaces/UN43/pages/233832670/Run+Unravel+Daemons+with+Custom+User" target="_blank">switch_to_user</a> page. </p><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-RestartUnravelServer" class="bridgehead">Restart Unravel Server</h6><p>After edits to <code class="code">com.unraveldata.login.admins</code> in
<code class="code">/usr/local/unravel/etc/unravel.properties</code> it is
necessary to run the following script in order to make changes take
effect. The <code class="code">echo</code> command shows the page to visit with
your browser. If you are using an ssh tunnel or http proxy, you
might need to make adjustments. <code class="code">UNRAVEL_HOST_IP</code> is a
fully qualified DNS or IP Address.</p><pre class="programlisting"># sudo /etc/init.d/unravel_all.sh start
# sleep 60
# echo "http://$(hostname -f):3000/"</pre><p>This completes the basic/core configuration.</p><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-5LogintoUnravelWebUI" class="bridgehead">5. Log into Unravel Web UI</h6><p>Using a web browser, navigate to
<code class="code">http://{UNRAVEL_HOST_IP}</code>:3000
and login as user "<code class="code">admin"</code> with password
<code class="code">"unraveldata</code>".</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>For the free trial version, use the Chrome web browser.</p></div><div class="mediaobject"><table style="border: 0; width: 376px; cellpadding: 0; cellspacing: 0;" class="image-viewport"><tr style="height: 250px"><td><img style="max-width: 376px; max-height: 250px; " src="../../image/15c3fbafa198e4.png" alt="226263145.png"></img></td></tr></table></div><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-Congratulations" class="bridgehead">Congratulations!</h6><p>Unravel Server is up and running. Unravel Web UI displays
collected data. For instructions on using Unravel Web UI, see the
<a class="link" href="../user-guide.html" title="User Guide">User Guide</a>.</p><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-6ConfigureUnravelServerAdvancedOptions" class="bridgehead">6. Configure Unravel Server (Advanced Options)</h6><h6 id="UUID-18633110-9981-9339-796a-55c4fc3aeb57_id_Step1InstallUnravelServeronHDP-EnableAdditionalDataCollectionInstrumentation" class="bridgehead">Enable Additional Data Collection/Instrumentation</h6><p>Install the Unravel Sensor Parcel on gateway/edge/client nodes
that are used to submit Hive queries to push additional information
to Unravel Server. For details, see <a class="link" href="hortonworks-data-platform--hdp-.html#UUID-a2bcddfc-ab84-a4dd-dc7f-130c72d54ecb" title="Step 2: Enable Additional Data Collection / Instrumentation for HDP">Part 2 (Optional): Enable
Additional Data Collection / Instrumentation for HDP</a>.</p></section><section xml:lang="en" dir="ltr" class="section original-topic" data-origin-id="UUID-a2b4e161-66dc-49d9-0600-1f4e0404a12a" id="UUID-a2bcddfc-ab84-a4dd-dc7f-130c72d54ecb"><div class="titlepage"><div><div class="title"><h5 class="title">Step 2: Enable Additional Data Collection / Instrumentation for HDP</h5></div></div></div><h6 id="UUID-a2bcddfc-ab84-a4dd-dc7f-130c72d54ecb_id_Step2EnableAdditionalDataCollectionInstrumentationforHDP-Introduction" class="bridgehead">Introduction</h6><p>This topic explains how to
configure Unravel Sensor for Tez
(<code class="code">unravel_us</code>) to retrieve data
from the Tez execution engine. Retrievable data includes Hive
queries, application timelines, sensor agent data, YARN RM data,
logs, and so on.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p><code class="code">HIGHLIGHTED</code> text and
text with brackets ( { } ) indicate where you must substitute your
particular values for the text.</p><p><code class="code">UNRAVEL_HOST_IP</code> must be
a fully qualified DNS or an IP address.</p></div><h6 id="UUID-a2bcddfc-ab84-a4dd-dc7f-130c72d54ecb_id_Step2EnableAdditionalDataCollectionInstrumentationforHDP-1ConvertYourUnravelInstallationtoHDP" class="bridgehead">1. Convert Your Unravel Installation to HDP.</h6><pre class="programlisting"># sudo /etc/init.d/unravel_all.sh stop
# sudo /usr/local/unravel/install_bin/switch_to_hdp.sh</pre><div dir="ltr" class="note"><h3 class="title">Note</h3><p>Note: This change
remains after RPM upgrades.</p></div><h6 id="UUID-a2bcddfc-ab84-a4dd-dc7f-130c72d54ecb_id_Step2EnableAdditionalDataCollectionInstrumentationforHDP-2UpdateSite-SpecificHDPPropertiesinunravelproperties" class="bridgehead">2. Update Site-Specific HDP Properties in unravel.properties</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Add these properties
<code class="code">to/usr/local/unravel/etc/unravel.properties</code>:</p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><colgroup>
                <col></col>
                <col></col>
                <col></col>
              </colgroup><thead><tr>
                  <th class="th">
                    <p>Property</p>
                  </th>
                  <th class="th">
                    <p>Description</p>
                  </th>
                  <th class="th">
                    <p>Default Value</p>
                  </th>
                </tr></thead><tbody><tr>
                  <td class="td">
                    <p>
                      <code class="code">com.unraveldata.yarn.timeline-service.webapp.address</code>
                    </p>
                  </td>
                  <td class="td">
                    <p>The http address of the Timeline service web
application</p>
                  </td>
                  <td class="td">
                    <p>
                      <a class="link" href="http://localhost" target="_blank">http://localhost</a>
                    </p>
                  </td>
                </tr><tr>
                  <td class="td">
                    <p>
                      <code class="code">com.unraveldata.yarn.timeline-service.port</code>
                    </p>
                  </td>
                  <td class="td">
                    <p>Timeline service port</p>
                  </td>
                  <td class="td">
                    <p>8188</p>
                  </td>
                </tr></tbody></table></div><p>For example,</p><pre class="programlisting">
com.unraveldata.yarn.timeline-service.webapp.address=http://172.16.1.101
com.unraveldata.yarn.timeline-service.port=8188</pre></li><li class="listitem"><p> Open
<code class="code">/usr/local/unravel/etc/unravel.properties</code> to see if
you need to modify any of these properties which were added or
modified by the script above (<code class="code">switch_to_hdp.sh</code>).</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>If you are using Spark1 and Spark2 you <span class="underline">must</span> set
<code class="code">com.unraveldata.spark.eventlog.location</code>  to two
directories using a comma separated list,
e.g., <code class="code">com.unraveldata.spark.eventlog.location</code><code class="code">=hdfs:///spark1-history/,</code>hdfs:///spark2-history/</p></div><pre class="programlisting">// Repoint Unravel application logs directory
com.unraveldata.job.collector.done.log.base=/mr-history/done
com.unraveldata.job.collector.log.aggregation.base=/app-logs/*/logs/
com.unraveldata.spark.eventlog.location=hdfs:///spark-history/
 
// Add Hive Metastore database information for Unravel Hive Config 
javax.jdo.option.ConnectionURL=jdbc:mysql://{hostname}:3306/{database_name} 
javax.jdo.option.ConnectionDriverName=com.mysql.jdbc.Driver
javax.jdo.option.ConnectionUserName={HiveMetastoreUserName} 
javax.jdo.option.ConnectionPassword={HiveMetastorePassword}</pre></li><li class="listitem"><p>Log into Ambari Web UI (AWU) to verify the above properties
have been set correctly in <code class="code">unravel.properties</code>. Update
the value of any property which has not been set correctly.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>On the
left-hand side of AWU's dashboard, click
<span class="bold"><strong>MapReduce2</strong></span> | <span class="bold"><strong>Configs</strong></span>. Select the
<span class="bold"><strong>Advanced</strong></span> tab, and then select<span class="bold"><strong>Advanced mapred-site</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>Verify <code class="code">com.unraveldata.job.collector.done.log.base</code>
equals <span class="bold"><strong>mapreduce.jobhistory.done-dir.</strong></span></p></li></ul></div></li><li class="listitem"><p>On the left-hand side of AWU's
dashboard, click <span class="bold"><strong>YARN</strong></span> |
<span class="bold"><strong>Configs</strong></span>. Select the <span class="bold"><strong>Advanced</strong></span> tab,
and then select<span class="bold"><strong>Node Manager</strong></span>.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>Verify <code class="code">com.unraveldata.job.collector.done.log.</code><code class="code">aggregation.base</code>
equals <span class="bold"><strong>yarn.nodemanager.remote-app=log-dir</strong></span>.</p></li></ul></div></li><li class="listitem"><p>On the
left-hand side of AWU's dashboard, click
<span class="bold"><strong>Hive</strong></span> | <span class="bold"><strong>Configs</strong></span>. Select the
<span class="bold"><strong>Advanced</strong></span> tab, and then select<span class="bold"><strong>Hive Metastore</strong></span>.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>Verify <code class="code">javax.jdo.option.ConnectionURL</code>
equals jdbc:mysql://<span class="bold"><strong>Database
Host</strong></span>:3306/<span class="bold"><strong>Database URL</strong></span>.</p></li><li class="listitem"><p>Verify <code class="code">javax.jdo.option.ConnectionDriverName</code>
equals <span class="bold"><strong>JDBC Driver
Class</strong></span>.</p></li><li class="listitem"><p>Verify <code class="code">javax.jdo.option.ConnectionUserName</code>
equals <span class="bold"><strong>Database</strong></span><span class="bold"><strong>Username</strong></span>.</p></li></ul></div></li></ul></div></li></ul></div><h6 id="UUID-a2bcddfc-ab84-a4dd-dc7f-130c72d54ecb_id_Step2EnableAdditionalDataCollectionInstrumentationforHDP-3StartUnravelServer" class="bridgehead">3. Start Unravel Server</h6><div dir="ltr" class="note"><h3 class="title">Note</h3><p>Note: Unravel must
be up for the next step to complete.</p></div><pre class="programlisting"># sudo /etc/init.d/unravel_all.sh start</pre><h6 id="UUID-a2bcddfc-ab84-a4dd-dc7f-130c72d54ecb_id_Step2EnableAdditionalDataCollectionInstrumentationforHDP-4InstallUnravelHiveHookandSparkSensorOntoHDPServers" class="bridgehead">4. Install Unravel Hive Hook and Spark Sensor Onto HDP Servers</h6><p>Install Unravel Hive Hook and Spark
Sensor onto HDP servers (JAR files) as follows (substitute correct
fully qualified host name or IP address for <code class="code">UNRAVEL_HOST_IP</code>):</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Login as root and ensure
<code class="code">wget</code> is installed</p><pre class="programlisting">
# /usr/local/unravel/install_bin/unraveldata-clients/unravel_hdp_setup.sh </pre></li><li class="listitem"><p>From Unravel server (eg. edge node)
run on each server that will use instrumentation.</p><div dir="ltr" class="warning"><h3 class="title">Warning</h3><p>Be sure to substitute valid values.</p><p><code class="code">SPARK_VERSION_X.Y</code>has the following possible
values: <span class="bold"><strong><code class="code">spark-1.3</code></strong></span> for Spark
1.3.x, <span class="bold"><strong><span class="bold"><strong><code class="code">spark-1.5</code></strong></span></strong></span>for
Spark 1.5.x, <span class="bold"><strong><span class="bold"><strong><code class="code">spark-1.6</code></strong></span></strong></span>for
Spark 1.6.x,  <span class="bold"><strong><span class="bold"><strong><code class="code">spark-2.0</code></strong></span></strong></span>for
Spark 2.0.x., and <span class="bold"><strong><span class="bold"><strong><code class="code">2.2.0</code></strong></span></strong></span>for
Spark 2.2.x.</p><p>
                <code class="code">HIVE_VERSION -
must be a Hive version that Unravel Server supports:  either
1.2.0 or 0.13.0. Be sure to use either of
these values in exactly this
format.</code>
              </p></div><pre class="programlisting"># yum install -y wget
# cd /usr/local/unravel/install_bin/unraveldata-clients/
# sudo ./unravel_hdp_setup.sh install -y --unravel-server {UNRAVEL_HOST_IP}:3000 --hive-version {HIVE_VERSION} --spark-version {SPARK_VERSION}</pre></li><li class="listitem"><p>Files are installed locally on the edge node under:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <code class="code">/usr/local/unravel_client (Hive hook jar)</code>
                </p></li><li class="listitem"><p>
                  <code class="code">/usr/local/unravel-agent/jars/ (Resource metrics sensor
jars)</code>
                </p></li></ul></div></li><li class="listitem"><p><span class="underline">Manually copy</span> these two directories on all nodes in the
cluster (worker / edge / master). In all cases, instrumented nodes
must be able to open port 4043 of Unravel Server
(<code class="code">host2</code> if multi-host Unravel install)</p></li></ul></div><h6 id="UUID-a2bcddfc-ab84-a4dd-dc7f-130c72d54ecb_id_Step2EnableAdditionalDataCollectionInstrumentationforHDP-5AddUnravelHiveHookhive-siteSettingstoAllofHDPsServersintheClusterUsingAWU" class="bridgehead">5. Add Unravel Hive Hook hive-site Settings to All of HDP's Servers in the Cluster Using AWU</h6><div dir="ltr" class="warning"><h3 class="title">Warning</h3><p>Completion of this step requires a restart of all affected Hive
services in Ambari UI.</p></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>In AWU, on the left-hand side, click
<span class="bold"><strong>Hive</strong></span> | <span class="bold"><strong>Configs</strong></span>. Select the
<span class="bold"><strong>Advanced</strong></span> tab, and then select <span class="bold"><strong>Custom
hive-site</strong></span> and <span class="bold"><strong>Add Property</strong></span> below and use
<span class="inlinemediaobject"><img src="../../image/15c3fbafa1cff6.png" alt="446922979.png"></img></span><span class="bold"><strong>Bulk property add mode.</strong></span></p><pre class="programlisting">
hive.exec.driver.run.hooks=com.unraveldata.dataflow.hive.hook.HiveDriverHook 
com.unraveldata.hive.hdfs.dir=/user/unravel/HOOK_RESULT_DIR 
com.unraveldata.hive.hook.tcp=true 
com.unraveldata.host={add unravel gateway internal IP hostname} 
 
// Find below properties as it may already exists, concatenate it with a comma &amp; no spaces
hive.exec.pre.hooks=com.unraveldata.dataflow.hive.hook.HivePreHook 
hive.exec.post.hooks=com.unraveldata.dataflow.hive.hook.HivePostHook 
hive.exec.failure.hooks=com.unraveldata.dataflow.hive.hook.HiveFailHook</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>If LLAP is enabled copy the above
settings in <span class="bold"><strong>Custom hive-interactive-site</strong></span> as
well.</p><div dir="ltr" class="tip"><h3 class="title">Manual edit hive-site.xml (no AWU)</h3><p><code class="code">hive-site.xml</code> file is located at
<code class="code">/etc/hive/conf/</code>.</p></div></li></ul></div></li><li class="listitem"><p>Add <code class="code">AUX_CLASSPATH</code> to AWU's
<span class="bold"><strong>hive-env</strong></span> template:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>In AWU, on the left-hand side, click <span class="bold"><strong>Hive</strong></span>,
next click <span class="bold"><strong>Configs</strong></span>, go to the
<span class="bold"><strong>Advanced</strong></span> tab, and select/click <span class="bold"><strong>Advanced
hive-env</strong></span>.</p></li><li class="listitem"><p>Next, inside the <span class="bold"><strong>Advanced
hive-env</strong></span> template, towards the end of line add below:</p><pre class="programlisting">
export AUX_CLASSPATH=${AUX_CLASSPATH}:/usr/local/unravel_client/unravel-hive-1.2.0-hook.jar</pre><div class="mediaobject"><table style="border: 0; width: 689px; cellpadding: 0; cellspacing: 0;" class="image-viewport"><tr style="height: 250px"><td><img style="max-width: 689px; max-height: 250px; " src="../../image/15c3fbafa20a1e.png" alt="226328702.png"></img></td></tr></table></div></li><li class="listitem"><p>If LLAP is enabled copy above line of
code into <span class="bold"><strong>Advanced hive-interactive-env</strong></span> as
well.</p><div dir="ltr" class="tip"><h3 class="title">You can manually edit hive-env.sh without using
AWU.</h3><p>The <code class="code">hive-env.sh</code> file is located at
<code class="code">/etc/hive/conf/</code>.</p></div></li></ul></div></li><li class="listitem"><p>Add <code class="code">HADOOP_CLASSPATH</code> to AWU's
<span class="bold"><strong>hadoop-env</strong></span> template:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>In AWU, on the left-hand side, click <span class="bold"><strong>HDFS</strong></span>,
next click <span class="bold"><strong>Configs</strong></span>, go to the
<span class="bold"><strong>Advanced</strong></span> tab, and select/click <span class="bold"><strong>Advanced
hadoop-env</strong></span>.</p></li><li class="listitem"><p>Next, inside the
<span class="bold"><strong>hadoop-env</strong></span> template, look for <span class="bold"><strong>export
HADOOP_CLASSPATH</strong></span> and append unravel's jar path like
below:</p><pre class="programlisting">
export HADOOP_CLASSPATH=${HADOOP_CLASSPATH}:/usr/local/unravel_client/unravel-hive-1.2.0-hook.jar</pre><div class="mediaobject"><table style="border: 0; width: 666px; cellpadding: 0; cellspacing: 0;" class="image-viewport"><tr style="height: 250px"><td><img style="max-width: 666px; max-height: 250px; " src="../../image/15c3fbafa24322.png" alt="226558081.png"></img></td></tr></table></div></li></ul></div></li></ul></div><h6 id="UUID-a2bcddfc-ab84-a4dd-dc7f-130c72d54ecb_id_Step2EnableAdditionalDataCollectionInstrumentationforHDP-6OptionallyforTezEnableUnravelTezInstrumentationonallofHDPsServicesintheCluster" class="bridgehead">6. Optionally for Tez, Enable Unravel Tez Instrumentation on all of HDP's Services in the Cluster</h6><div dir="ltr" class="warning"><h3 class="title">Warning</h3><p>Completion of this step requires a restart of all affected Hive
services in Ambari UI.</p></div><div class="itemizedlist"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Append<code class="code">-javaagent:/usr/local/unravel-agent/jars/btrace-agent.jar=libs=mr,config=tez
-Dunravel.server.hostport=UNRAVEL_HOST_IP:4043</code>to
<span class="bold"><strong><a class="link" href="http://tez.am" target="_blank">tez.am</a>.launch.cmd-opts</strong></span> and
<span class="bold"><strong>tez.task.launch.cmd-opts</strong></span>.</p></li><li class="listitem"><p>Restart the affected
component(s). The screenshot below illustrates this change.</p><div class="mediaobject"><table style="border: 0; width: 840px; cellpadding: 0; cellspacing: 0;" class="image-viewport"><tr><td><img style="max-width: 840px; " src="../../image/15c3fbafa27a3e.png" alt="225476737.png"></img></td></tr></table></div></li></ul></div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Confirm that hive-execution.engine is
set to tez.</p><pre class="programlisting">set hive.execution.engine=tez;</pre></li><li class="listitem"><p>Using the Ambari Web UI (AWU), configure the Btrace agent for
Tez:</p></li><li class="listitem"><p>In a Kerberos environment we will need to
modify <span class="bold"><strong><a class="link" href="http://tez.am" target="_blank">tez.am</a>.view-acls</strong></span> property with the RUN_AS
user or *.</p></li></ul></div><h6 id="UUID-a2bcddfc-ab84-a4dd-dc7f-130c72d54ecb_id_Step2EnableAdditionalDataCollectionInstrumentationforHDP-7OptionallyforSparkonYARNEnableUnravelSparkInstrumentationonAllofHDPsServersintheCluster" class="bridgehead">7. Optionally for Spark on YARN, Enable Unravel Spark Instrumentation on All of HDP's Servers in the Cluster</h6><div dir="ltr" class="warning"><h3 class="title">Warning</h3><p>Completion of this step requires a restart of all affected Spark
services in Ambari UI.</p><p>Be sure to substitute valid values.for <code class="code">UNRAVEL_HOST_IPX</code>
and <code class="code">SPARK_VERSION_X.Y.</code></p><p><code class="code">SPARK_VERSION_X.Y</code>
 has the following possible
values: <span class="bold"><strong><code class="code">spark-1.3</code></strong></span> for Spark
1.3.x, <span class="bold"><strong><span class="bold"><strong><code class="code">spark-1.5</code></strong></span></strong></span>for
Spark 1.5.x, <span class="bold"><strong><span class="bold"><strong><code class="code">spark-1.6</code></strong></span></strong></span>for
Spark 1.6.x,  <span class="bold"><strong><span class="bold"><strong><code class="code">spark-2.0</code></strong></span></strong></span>for
Spark 2.0.x, <span class="bold"><strong>spark-</strong></span><span class="bold"><strong><span class="bold"><strong><code class="code">2.2</code></strong></span></strong></span>for
Spark 2.2.x, and <span class="bold"><strong>spark-</strong></span><span class="bold"><strong><code class="code">2.3</code></strong></span>for
Spark 2.3.x.</p></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Add Spark properties into AWU's <span class="bold"><strong>Custom
spark-defaults</strong></span>:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>In AWU, on the left-hand side, click <span class="bold"><strong>Spark</strong></span> |
<span class="bold"><strong>Configs</strong></span> | <span class="bold"><strong>Custom
spark-defaults</strong></span>.</p></li></ul></div></li><li class="listitem"><p>Inside <span class="bold"><strong>Custom spark-defaults</strong></span>, click <span class="bold"><strong>Add
Property</strong></span> for Spark as follows and use <span class="inlinemediaobject"><img src="../../image/15c3fbafa1cff6.png" alt="446922979.png"></img></span><span class="bold"><strong>Bulk property add mode</strong></span>:</p><pre class="programlisting">spark.unravel.server.hostport={UNRAVEL_HOST_IP}:4043
spark.driver.extraJavaOptions=-javaagent:/usr/local/unravel-agent/jars/btrace-agent.jar=config=driver,libs=spark-{SPARK_VERSION_X.Y}
spark.executor.extraJavaOptions=-javaagent:/usr/local/unravel-agent/jars/btrace-agent.jar=config=executor,libs=spark-{SPARK_VERSION_X.Y} 
spark.eventLog.enabled=true</pre></li><li class="listitem"><div dir="ltr" class="tip"><h3 class="title">You can manually edit spark-defaults.conf without
using AWU.</h3><p>The default location for <code class="code">spark-defaults.conf</code>
is <code class="code">/usr/hdp/current/SPARK_VERSION_X.Y</code> except
when</p><div class="itemizedlist"><ul style="list-style-type: circle; " class="itemizedlist"><li class="listitem"><p>The cluster only has one spark 1.X version:  <code class="code">/usr/hdp/current/spark-client/conf</code></p></li><li class="listitem"><p>For spark 2.X version: <code class="code">/usr/hdp/current/spark2-client/conf</code></p></li></ul></div></div></li></ul></div><h6 id="UUID-a2bcddfc-ab84-a4dd-dc7f-130c72d54ecb_id_Step2EnableAdditionalDataCollectionInstrumentationforHDP-8OptionallyforMapReduce2MRJVMSensorCluster-Wide" class="bridgehead">8. Optionally for MapReduce2 (MR) JVM Sensor Cluster-Wide</h6><div dir="ltr" class="warning"><h3 class="title">Warning</h3><p>Completion of this step will require a
restart of all affected HDFS, MAPREDUCE2, YARN and
HIVE services in Ambari UI.</p></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>In AWU, on the left-hand
side, click <span class="bold"><strong>MapReduce2</strong></span>, next
click <span class="bold"><strong>Configs</strong></span>, go to
the <span class="bold"><strong>Advanced</strong></span> tab, and select/click
<span class="bold"><strong>Advancedmapred-site</strong></span></p></li><li class="listitem"><p>Search for <span class="bold"><strong>MR AppMaster Java Heap
Size</strong></span> property and concatenate by copying and pasting the
below property for
<code class="code">current.yarn.app.mapreduce.am.command-opts</code>MR JVM sensor. Be sure to leave a
white space in-between the current and the following new
property.</p><pre class="programlisting">
-javaagent:/usr/local/unravel-agent/jars/btrace-agent.jar=libs=mr -Dunravel.server.hostport={UNRAVEL_HOST_IP}:4043</pre></li><li class="listitem"><p>On
the top notification banner, click Save</p></li><li class="listitem"><p>In AWU, on the left-hand side, click
<span class="bold"><strong>MapReduce2</strong></span>, next click <span class="bold"><strong>Configs</strong></span>,
go to the <span class="bold"><strong>Advanced</strong></span> tab, and
select/click <span class="bold"><strong>Custom mapred-site:</strong></span></p></li><li class="listitem"><p>Inside <span class="bold"><strong>Custom </strong></span><span class="bold"><strong>mapred-site</strong></span>,
click <span class="bold"><strong>Add Property</strong></span> for MR JVM sensor as follows
and use </p><div class="mediaobject"><img src="../../image/15c3fbafa1cff6.png" alt="446922979.png"></img></div><p><span class="bold"><strong>Bulk property add mode</strong></span>:</p></li><li class="listitem"><p>On the top notification banner, click
Save</p><pre class="programlisting">mapreduce.task.profile=true
mapreduce.task.profile.maps=0-5
mapreduce.task.profile.reduces=0-5
mapreduce.task.profile.params=-javaagent:/usr/local/unravel-agent/jars/btrace-agent.jar=libs=mr -Dunravel.server.hostport=UNRAVEL_HOST_IP:4043</pre><p>Notice that in this code block, the
blank lines separate single full lines of text that are wrapped due
to length. Also, ensure you replace <code class="code">UNRAVEL_HOST_IP</code> with
your Unravel server's IP address.</p><div dir="ltr" class="tip"><h3 class="title">You can manually edit mapred-site.xml without
using AWU.</h3><p>The <code class="code">mapred-site.xml</code> file is located at
<code class="code">/etc/hadoop/conf/</code>.</p></div></li></ul></div><h6 id="UUID-a2bcddfc-ab84-a4dd-dc7f-130c72d54ecb_id_Step2EnableAdditionalDataCollectionInstrumentationforHDP-9OptionallyforYARN" class="bridgehead">9. Optionally for YARN</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>If <code class="code">yarn.acl.enable=true</code> then you need to grant
Unravel access and must set one of the following:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><code class="code">yarn.acl.enable=false,</code> or</p></li><li class="listitem"><p><code class="code">yarn.admin.acl=userName</code>  (set to * to allow
access to everyone)</p></li></ul></div></li></ul></div><h6 id="UUID-a2bcddfc-ab84-a4dd-dc7f-130c72d54ecb_id_Step2EnableAdditionalDataCollectionInstrumentationforHDP-10ConfirmthatUnravelWebUIShowsTezData" class="bridgehead">10. Confirm that Unravel Web UI Shows Tez Data</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Run
<code class="code">/usr/local/unravel/install_bin/hive_test_simple.sh</code> on
HDP cluster or any cloud environment where
<code class="code">hive.execution.engine=tez</code>.</p></li><li class="listitem"><p>Check Unravel Web UI for Tez
data. For instructions, see <a class="link" href="../../">Tez Application Manager</a>.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>Unravel Web UI may take a few seconds to load Tez
data.</p></div></li></ul></div></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">See also<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><article id="search-result-wrapper"><div class="search-container"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="mapr.html">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2019  </div></div></footer></div></div></div></div></body></html>
