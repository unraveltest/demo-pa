<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta charset="UTF-8"></meta><meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="no"></meta><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700|Material+Icons" rel="stylesheet"></link><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			
					var local_csh = false;
				
			var useanchorlinks = false;
			</script><title>Part 3: Install Unravel Spark Sensor on New or Existing Qubole Spark Cluster</title><link rel="stylesheet" type="text/css" href="../../../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../../../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../../../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../../../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../../../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../../../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../../../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../../../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../../../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../../../css/5c41143e57757.css"></link><script src="../../../js/jquery-3/jquery-3.3.1.min.js" type="text/javascript"></script><script src="../../../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../../../js/materialize.min.js" type="text/javascript"></script><script src="../../../js/bootstrap.min.js" type="text/javascript"></script><script src="../../../js/purl.js" type="text/javascript"></script><script src="../../../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../../../js/html5-2.js" type="text/javascript"></script><script src="../../../js/clipboard.min.js" type="text/javascript"></script><script src="../../../js/fuse.min.js" type="text/javascript"></script><script src="../../../js/hilitor.js" type="text/javascript"></script><script src="../../../js/html5.fuse.search.js" type="text/javascript"></script><script src="../../js/fuzzydata.js" type="text/javascript"></script><script src="../../../js/csh.js" type="text/javascript"></script><meta xmlns:xlink="http://www.w3.org/1999/xlink" name="generator" content="Paligo"></meta><link rel="prev" href="part-2--install-unravel-hive-sensor-on-qubole-hadoop2-hive-cluster.html" title="Part 2: Install Unravel Hive Sensor on Qubole Hadoop2/Hive Cluster"></link><link rel="next" href="part-4--modify-amazon-emr-cluster-bootstrap-setup.html" title="Part 4: Modify Amazon EMR Cluster Bootstrap/Setup"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><script>
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				$('.materialboxed').materialbox();
				});
			</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/googlecode.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/highlight.min.js"></script><script type="text/javascript">
				$(document).ready(function(){
				$('pre').each(function(i, block) {
				hljs.highlightBlock(block);
				});
				});
			</script></head><body class="theme1 page-toc" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix="../../"><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="https://unraveldata.com/" target="_blank"><img id="logotype-pageheader" src="../../../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav"></ul></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><a href="https://unraveldata.com/" target="_blank"><img id="logotype-pageheader" src="../../../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><ul class="toc nav nav-site-sidebar"><li><a href="../../unravel-4-0-4-1.html" class="topic-link section original-topic" data-origin-id="UUID-3477932e-f901-9628-ffc0-665f3d810fce" data-permalink="unravel-4-0-4-1.html" data-topic-level="1" data-relative-prefix="" data-time-modified="2019-01-29"><span class="glyphicon"></span> Unravel 4.0-4.1</a><ul><li><a href="../../unravel-4-0-4-1/overview.html" class="topic-link section original-topic" data-origin-id="UUID-8925312e-e09e-59aa-d923-890cb5a0c6e0" data-permalink="unravel-4-0-4-1/overview.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Overview</a><ul><li><a href="../../unravel-4-0-4-1/overview.html#UUID-88f6d89c-f684-43cd-3425-4052e4c7f7dc_id_Overview-WhereDoesUnravelServerReside" class="topic-link section internal" data-origin-id="" data-time-modified="false">Where Does Unravel Server Reside?</a></li><li><a href="../../unravel-4-0-4-1/overview.html#UUID-88f6d89c-f684-43cd-3425-4052e4c7f7dc_id_Overview-WhatDoesaBasicDeploymentProvide" class="topic-link section internal" data-origin-id="" data-time-modified="false">What Does a Basic Deployment Provide?</a></li><li><a href="../../unravel-4-0-4-1/overview.html#UUID-88f6d89c-f684-43cd-3425-4052e4c7f7dc_id_Overview-WhatAreAdvancedDeploymentOptions" class="topic-link section internal" data-origin-id="" data-time-modified="false">What Are Advanced Deployment Options?</a></li></ul></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-.html" class="topic-link section original-topic" data-origin-id="UUID-5062d1d7-d83f-10cd-dc98-6fe06db9c128" data-permalink="unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Installation Guide for Cloudera Distribution Including Apache Hadoop (CDH), with Cloudera Manager (CM)</a><ul><li><a href="../../unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-.html#UUID-e491725f-d884-0f0f-8c6f-c06bd531dcef_id_InstallationGuideforClouderaDistributionIncludingApacheHadoopCDHwithClouderaManagerCM-OrderedSteps" class="topic-link section internal" data-origin-id="" data-time-modified="false">Ordered Steps</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-/part-1--install-unravel-server-on-cdh-cm.html" class="topic-link section original-topic" data-origin-id="UUID-090904cf-b368-d040-ef90-7da702a8aa3e" data-permalink="unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-/part-1--install-unravel-server-on-cdh-cm.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 1: Install Unravel Server on CDH+CM</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-/part-2--install-unravel-sensor-parcel-on-cdh-cm.html" class="topic-link section original-topic" data-origin-id="UUID-6855ca6d-096b-8903-57cd-7b28a09e3419" data-permalink="unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-/part-2--install-unravel-sensor-parcel-on-cdh-cm.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 2: Install Unravel Sensor Parcel on CDH+CM</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-/part-3--additional-topics-for-cdh.html" class="topic-link section original-topic" data-origin-id="UUID-1f99d3c9-4fca-0697-8fc4-6060dfb28784" data-permalink="unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-/part-3--additional-topics-for-cdh.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 3: Additional Topics for CDH</a></li></ul></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-mapr.html" class="topic-link section original-topic" data-origin-id="UUID-fb61c968-3ae8-c336-5c38-00ffc8cba6a3" data-permalink="unravel-4-0-4-1/installation-guide-for-mapr.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Installation Guide for MapR</a><ul><li><a href="../../unravel-4-0-4-1/installation-guide-for-mapr.html#UUID-5204ceab-4d91-8f7c-84cf-03b60db3dc52_id_InstallationGuideforMapR-OrderedSteps" class="topic-link section internal" data-origin-id="" data-time-modified="false">Ordered Steps</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-mapr/part-1--install-unravel-server-on-mapr.html" class="topic-link section original-topic" data-origin-id="UUID-f55b6021-7c0e-cf64-fd87-1ce65603600e" data-permalink="unravel-4-0-4-1/installation-guide-for-mapr/part-1--install-unravel-server-on-mapr.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 1: Install Unravel Server on MapR</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-mapr/part-2--enable-additional-data-collection---instrumentation-for-mapr.html" class="topic-link section original-topic" data-origin-id="UUID-5a31dde8-73ba-a246-9acc-1a20142ab469" data-permalink="unravel-4-0-4-1/installation-guide-for-mapr/part-2--enable-additional-data-collection---instrumentation-for-mapr.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 2: Enable Additional Data Collection / Instrumentation for MapR</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-mapr/part-3--additional-topics-for-mapr.html" class="topic-link section original-topic" data-origin-id="UUID-0929d491-708b-e247-9033-cb65f2b3d655" data-permalink="unravel-4-0-4-1/installation-guide-for-mapr/part-3--additional-topics-for-mapr.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 3: Additional Topics for MapR</a></li></ul></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters.html" class="topic-link section original-topic" data-origin-id="UUID-604e3bcd-95c3-29e6-7dea-c2979945af64" data-permalink="unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Installation Guide for Amazon Elastic MapReduce (Amazon EMR) and Qubole Clusters</a><ul><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters.html#UUID-9a17adfa-8c96-d07d-8020-55ae3afecd31_id_InstallationGuideforAmazonElasticMapReduceAmazonEMRandQuboleClusters-OrderedSteps" class="topic-link section internal" data-origin-id="" data-time-modified="false">Ordered Steps</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-1--install-unravel-server-for-amazon-emr-or-qubole-cluster.html" class="topic-link section original-topic" data-origin-id="UUID-68b7cf9f-34f1-5af9-00c3-1ce1d6443622" data-permalink="unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-1--install-unravel-server-for-amazon-emr-or-qubole-cluster.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 1: Install Unravel Server for Amazon EMR or Qubole Cluster</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-2--install-unravel-hive-sensor-on-qubole-hadoop2-hive-cluster.html" class="topic-link section original-topic" data-origin-id="UUID-7b58715a-f121-c878-b298-2260b7ce21f4" data-permalink="unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-2--install-unravel-hive-sensor-on-qubole-hadoop2-hive-cluster.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 2: Install Unravel Hive Sensor on Qubole Hadoop2/Hive Cluster</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-3--install-unravel-spark-sensor-on-new-or-existing-qubole-spark-cluster.html" class="topic-link section original-topic" data-origin-id="UUID-2ad2e2a1-2d04-9caf-5b9a-c491ad71651f" data-permalink="unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-3--install-unravel-spark-sensor-on-new-or-existing-qubole-spark-cluster.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 3: Install Unravel Spark Sensor on New or Existing Qubole Spark Cluster</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-4--modify-amazon-emr-cluster-bootstrap-setup.html" class="topic-link section original-topic" data-origin-id="UUID-ec5f38e3-2384-1ee9-6f7a-af3750a4ff28" data-permalink="unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-4--modify-amazon-emr-cluster-bootstrap-setup.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 4: Modify Amazon EMR Cluster Bootstrap/Setup</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-5--additional-topics-for-emr-or-qubole.html" class="topic-link section original-topic" data-origin-id="UUID-468b93f7-bb6a-3ef1-09e3-cd200154be86" data-permalink="unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-5--additional-topics-for-emr-or-qubole.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 5: Additional Topics for EMR or Qubole</a></li></ul></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-.html" class="topic-link section original-topic" data-origin-id="UUID-035fb894-7e54-644d-6d2d-8919206f63a4" data-permalink="unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Installation Guide for Hortonworks Data Platform (HDP)</a><ul><li><a href="../../unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-.html#UUID-8c527b92-5389-8ada-a439-7d82e0010de8_id_InstallationGuideforHortonworksDataPlatformHDP-OrderedSteps" class="topic-link section internal" data-origin-id="" data-time-modified="false">Ordered Steps</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-/part-1--install-unravel-server-on-hdp.html" class="topic-link section original-topic" data-origin-id="UUID-c79986b8-de63-8e7b-a5e0-b0d23950aec4" data-permalink="unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-/part-1--install-unravel-server-on-hdp.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 1: Install Unravel Server on HDP</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-/part-2--enable-additional-data-collection---instrumentation-for-hdp.html" class="topic-link section original-topic" data-origin-id="UUID-4eefdc9b-be33-2733-6693-a8371067d5eb" data-permalink="unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-/part-2--enable-additional-data-collection---instrumentation-for-hdp.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 2: Enable Additional Data Collection / Instrumentation for HDP</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-/part-3--additional-topics-for-hdp.html" class="topic-link section original-topic" data-origin-id="UUID-46fb0787-8888-06b9-4579-f43f0471a93c" data-permalink="unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-/part-3--additional-topics-for-hdp.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 3: Additional Topics for HDP</a></li></ul></li><li><a href="../../unravel-4-0-4-1/user-guide.html" class="topic-link section original-topic" data-origin-id="UUID-539aa943-aeb2-c89f-5ff3-8e919a5fc15c" data-permalink="unravel-4-0-4-1/user-guide.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> User Guide</a><ul><li><a href="../../unravel-4-0-4-1/user-guide.html#UUID-08d4030d-6c2b-9e00-c3e7-d3cf3b40181d_id_UserGuide-GettingStartedGetting-Started_53157411html" class="topic-link section internal" data-origin-id="" data-time-modified="false">Getting Started</a></li><li><a href="../../unravel-4-0-4-1/user-guide.html#UUID-08d4030d-6c2b-9e00-c3e7-d3cf3b40181d_id_UserGuide-UseCasesUse-Cases_53314582html" class="topic-link section internal" data-origin-id="" data-time-modified="false">Use Cases</a></li><li><a href="../../unravel-4-0-4-1/user-guide.html#UUID-08d4030d-6c2b-9e00-c3e7-d3cf3b40181d_id_UserGuide-Notifications" class="topic-link section internal" data-origin-id="" data-time-modified="false">Notifications</a></li><li><a href="../../unravel-4-0-4-1/user-guide/getting-started.html" class="topic-link section original-topic" data-origin-id="UUID-387b73f8-53f9-6867-f563-0384106a6a7a" data-permalink="unravel-4-0-4-1/user-guide/getting-started.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Getting Started</a></li><li><a href="../../unravel-4-0-4-1/user-guide/the-operations-tab.html" class="topic-link section original-topic" data-origin-id="UUID-69d23d67-29c5-c641-0448-59ba9b42a533" data-permalink="unravel-4-0-4-1/user-guide/the-operations-tab.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">The Operations Tab</a></li><li><a href="../../unravel-4-0-4-1/user-guide/the-applications-tab.html" class="topic-link section original-topic" data-origin-id="UUID-d241cdd0-9f8c-ca9b-7872-85e8cc95d6e5" data-permalink="unravel-4-0-4-1/user-guide/the-applications-tab.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">The Applications Tab</a></li><li><a href="../../unravel-4-0-4-1/user-guide/the-data-tab.html" class="topic-link section original-topic" data-origin-id="UUID-0243c12b-bede-d4bd-1911-932d39fead1c" data-permalink="unravel-4-0-4-1/user-guide/the-data-tab.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">The Data Tab</a></li><li><a href="../../unravel-4-0-4-1/user-guide/setting-up-auto-actions--alerts-.html" class="topic-link section original-topic" data-origin-id="UUID-490fa21c-0266-c422-b7d3-dd782058c57b" data-permalink="unravel-4-0-4-1/user-guide/setting-up-auto-actions--alerts-.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Setting Up Auto Actions (Alerts)</a></li><li><a href="../../unravel-4-0-4-1/user-guide/use-cases.html" class="topic-link section original-topic" data-origin-id="UUID-36c1a9dd-2b4c-cd01-d79d-1234a68226f3" data-permalink="unravel-4-0-4-1/user-guide/use-cases.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Use Cases</a></li></ul></li><li><a href="../../unravel-4-0-4-1/unravel-server-reference.html" class="topic-link section original-topic" data-origin-id="UUID-2dcb0d02-9fe4-d98c-ac4d-c61842ef1a75" data-permalink="unravel-4-0-4-1/unravel-server-reference.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Unravel Server Reference</a><ul><li><a href="../../unravel-4-0-4-1/unravel-server-reference.html#UUID-97f67c8b-8003-5763-6265-f26a75d0bb26_id_UnravelServerReference-_bwaxof3tb14eUnravelServerDaemons" class="topic-link section internal" data-origin-id="" data-time-modified="false">Unravel Server Daemons</a></li><li><a href="../../unravel-4-0-4-1/unravel-server-reference.html#UUID-97f67c8b-8003-5763-6265-f26a75d0bb26_id_UnravelServerReference-_ranitvt6e5pgUnravelServerAdjustableProperties" class="topic-link section internal" data-origin-id="" data-time-modified="false">Unravel Server Adjustable Properties</a></li><li><a href="../../unravel-4-0-4-1/unravel-server-reference.html#UUID-97f67c8b-8003-5763-6265-f26a75d0bb26_id_UnravelServerReference-_dhjhvxwiog21AdjustableEnvironmentSettings" class="topic-link section internal" data-origin-id="" data-time-modified="false">Adjustable Environment Settings</a></li><li><a href="../../unravel-4-0-4-1/unravel-server-reference.html#UUID-97f67c8b-8003-5763-6265-f26a75d0bb26_id_UnravelServerReference-_37le18boksr8UnravelServerDirectoriesandFiles" class="topic-link section internal" data-origin-id="" data-time-modified="false">Unravel Server Directories and Files</a></li></ul></li><li><a href="../../unravel-4-0-4-1/advanced-topics.html" class="topic-link section original-topic" data-origin-id="UUID-692b04d7-91d9-3e2c-16f4-94a4256b885f" data-permalink="unravel-4-0-4-1/advanced-topics.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Advanced Topics</a><ul><li><a href="../../unravel-4-0-4-1/advanced-topics/creating-active-directory-kerberos-principals-and-keytabs-for-unravel.html" class="topic-link section original-topic" data-origin-id="UUID-0ea967e7-16b7-0350-bae1-f12eb8e21d82" data-permalink="unravel-4-0-4-1/advanced-topics/creating-active-directory-kerberos-principals-and-keytabs-for-unravel.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Creating Active Directory Kerberos Principals and Keytabs for Unravel</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/sensors.html" class="topic-link section original-topic" data-origin-id="UUID-c6fb86f3-512f-f5b6-b6c4-33d946c1ea3d" data-permalink="unravel-4-0-4-1/advanced-topics/sensors.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Sensors</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/workflows.html" class="topic-link section original-topic" data-origin-id="UUID-96d680d9-99cb-efd0-13d3-a95846cb6035" data-permalink="unravel-4-0-4-1/advanced-topics/workflows.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Workflows</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/custom-configurations.html" class="topic-link section original-topic" data-origin-id="UUID-be2d976c-3abf-a391-3c80-844c5ad6e61e" data-permalink="unravel-4-0-4-1/advanced-topics/custom-configurations.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Custom Configurations</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/connecting-to-a-hive-metastore.html" class="topic-link section original-topic" data-origin-id="UUID-36ff8b8d-6295-9064-2caf-1241cf6d9b41" data-permalink="unravel-4-0-4-1/advanced-topics/connecting-to-a-hive-metastore.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Connecting to a Hive Metastore</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/creating-an-aws-rds-cloudwatch-alarm-for-freestoragespace.html" class="topic-link section original-topic" data-origin-id="UUID-bf250233-025b-e35e-0db9-a61b9dc7696d" data-permalink="unravel-4-0-4-1/advanced-topics/creating-an-aws-rds-cloudwatch-alarm-for-freestoragespace.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Creating an AWS RDS CloudWatch Alarm for FreeStorageSpace</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/creating-application-tags.html" class="topic-link section original-topic" data-origin-id="UUID-3cbd1699-b834-2cfe-b7fd-8bfefa05631d" data-permalink="unravel-4-0-4-1/advanced-topics/creating-application-tags.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Creating Application Tags</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/troubleshooting.html" class="topic-link section original-topic" data-origin-id="UUID-944c26f0-d480-8847-cc52-3abdc9c64cec" data-permalink="unravel-4-0-4-1/advanced-topics/troubleshooting.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Troubleshooting</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/uninstalling-unravel-server.html" class="topic-link section original-topic" data-origin-id="UUID-52df0bc9-1443-3a27-b70b-f5a569410b3d" data-permalink="unravel-4-0-4-1/advanced-topics/uninstalling-unravel-server.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Uninstalling Unravel Server</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/upgrading-unravel-server.html" class="topic-link section original-topic" data-origin-id="UUID-a2b8f8bf-8edd-eb96-d2c5-64dc031e5a80" data-permalink="unravel-4-0-4-1/advanced-topics/upgrading-unravel-server.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Upgrading Unravel Server</a></li></ul></li><li><a href="../../unravel-4-0-4-1/release-notes--version-4-1-941.html" class="topic-link section original-topic" data-origin-id="UUID-64ad96d7-be99-d0cb-d940-f5a4060949d8" data-permalink="unravel-4-0-4-1/release-notes--version-4-1-941.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Release Notes: Version 4.1.941</a><ul><li><a href="../../unravel-4-0-4-1/release-notes--version-4-1-941.html#UUID-7cba538b-fd92-f5e0-3f38-b251ff6d1522_id_ReleaseNotesVersion41941-SoftwareVersion" class="topic-link section internal" data-origin-id="" data-time-modified="false">Software Version</a></li><li><a href="../../unravel-4-0-4-1/release-notes--version-4-1-941.html#UUID-7cba538b-fd92-f5e0-3f38-b251ff6d1522_id_ReleaseNotesVersion41941-NewFeatures" class="topic-link section internal" data-origin-id="" data-time-modified="false">New Features</a></li><li><a href="../../unravel-4-0-4-1/release-notes--version-4-1-941.html#UUID-7cba538b-fd92-f5e0-3f38-b251ff6d1522_id_ReleaseNotesVersion41941-TestedPlatforms" class="topic-link section internal" data-origin-id="" data-time-modified="false">Tested Platforms</a></li><li><a href="../../unravel-4-0-4-1/release-notes--version-4-1-941.html#UUID-7cba538b-fd92-f5e0-3f38-b251ff6d1522_id_ReleaseNotesVersion41941-ImprovementsBugfixes" class="topic-link section internal" data-origin-id="" data-time-modified="false">Improvements/Bugfixes</a></li><li><a href="../../unravel-4-0-4-1/release-notes--version-4-1-941.html#UUID-7cba538b-fd92-f5e0-3f38-b251ff6d1522_id_ReleaseNotesVersion41941-KnownIssues" class="topic-link section internal" data-origin-id="" data-time-modified="false">Known Issues</a></li></ul></li></ul></li></ul></aside><div class="site-content"><h1 class="publication-title">UN40 (Unravel 4.0-4.1)</h1><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="../../index-en.html">UN40 (Unravel 4.0-4.1)</a></li><li class="breadcrumb-link"><a href="../../unravel-4-0-4-1.html">Unravel 4.0-4.1</a></li><li class="breadcrumb-link"><a href="../installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters.html">Installation Guide for Amazon Elastic MapReduce (Amazon EMR) and Qubole Clusters</a></li><li class="breadcrumb-node">Part 3: Install Unravel Spark Sensor on New or Existing Qubole Spark Cluster</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="part-2--install-unravel-hive-sensor-on-qubole-hadoop2-hive-cluster.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="part-4--modify-amazon-emr-cluster-bootstrap-setup.html">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="../../index-en.html">UN40 (Unravel 4.0-4.1)</a></li><li class="breadcrumb-link"><a href="../../unravel-4-0-4-1.html">Unravel 4.0-4.1</a></li><li class="breadcrumb-link"><a href="../installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters.html">Installation Guide for Amazon Elastic MapReduce (Amazon EMR) and Qubole Clusters</a></li><li class="breadcrumb-node">Part 3: Install Unravel Spark Sensor on New or Existing Qubole Spark Cluster</li></ul></div><section xml:lang="en" dir="ltr" class="section original-topic" data-origin-id="UUID-2ad2e2a1-2d04-9caf-5b9a-c491ad71651f" data-permalink="unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-3--install-unravel-spark-sensor-on-new-or-existing-qubole-spark-cluster.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29" id="UUID-d21298d1-03a5-42e9-cb35-852185917689"><div class="titlepage"><div><div class="title"><h4 class="title">Part 3: Install Unravel Spark Sensor on New or Existing Qubole Spark Cluster</h4></div></div></div><section dir="ltr" class="section internal" data-origin-id="" data-time-modified="false" id="UUID-d21298d1-03a5-42e9-cb35-852185917689_id_Part3InstallUnravelSparkSensoronNeworExistingQuboleSparkCluster-Introduction"><div class="titlepage"><div><div class="title"><h5 class="title">Introduction</h5></div></div></div><p>Unravel Sensor can collect information about Spark applications. This guide describes how to install Unravel Sensor for Qubole-based Spark clusters. The information here applies to Spark versions 1.5.x through 2.0.x and Unravel 3.4-4.1. Highlighted text indicates where you must substitute your particular values.</p><p><code class="code">HIGHLIGHTED</code> text and text with brackets ( { } ), unless otherwise noted, indicates where you must substitute your particular values for the text.</p><p><code class="code">UNRAVEL_HOST_IP</code> must be a fully qualified DNS or the IP address.</p><p><code class="code">PATH_TO_SENSOR_JARS</code>: is the absolute path to the location of the sensor jars.</p></section><section dir="ltr" class="section internal" data-origin-id="" data-time-modified="false" id="UUID-d21298d1-03a5-42e9-cb35-852185917689_id_Part3InstallUnravelSparkSensoronNeworExistingQuboleSparkCluster-AddUnravelSparkInstrumentationtoNewQuboleSparkCluster"><div class="titlepage"><div><div class="title"><h5 class="title">Add Unravel Spark Instrumentation to New Qubole Spark Cluster</h5></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Configure Unravel s3 read-only credentials in <code class="code">/usr/local/unravel/etc/s3ro.properties</code> as follows:</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>This sample <code class="code">s3ro.properties</code> file has multiple s3 profiles and access keys.</p></div><pre class="programlisting">[default]
aws_access_key_id = {ACCESS_KEY_VALUE1}
aws_secret_access_key = {SECRET_KEY_VALUE1}

[profile_name_2]
aws_access_key_id = {ACCESS_KEY_VALUE2}
aws_secret_access_key = {SECRET_KEY_VALUE2}</pre><p>
                <span class="italic">Note: Substitute actual values for ACCESS_KEY_VALUEx and SECRET_KEY_VALUEx.</span>
              </p></li><li class="step"><p>Edit <code class="code">/usr/local/unravel/etc/unravel.properties</code> so that Unravel Server incorporates <code class="code">s3ro.properties</code>:</p><pre class="programlisting">com.unraveldata.s3.profile.config.file.path=/usr/local/unravel/etc/s3ro.properties
com.unraveldata.spark.s3.profilesToBuckets=&lt;default&gt;:&lt;s3ro_bucket1&gt;,&lt;profile_name_2&gt;:&lt;s3r0_bucket2&gt;</pre></li><li class="step"><p>Restart the Unravel ETL daemon(s):</p><pre class="programlisting"># sudo /etc/init.d/unravel_all.sh stop-etl
# sudo /etc/init.d/unravel_all.sh start</pre></li><li class="step"><p>Ensure ports 3000 (for web UI access) and 4043 (from cluster) are open for incoming traffic. These should <span class="bold"><strong>not</strong></span> be open to the public Internet.</p></li><li class="step"><p>Verify that port 3000 is open by running a <code class="code">curl</code> command from a potential Unravel user machine as follows :</p><div dir="ltr" class="tip"><h3 class="title">Tip</h3><p>If the version information is not visible (request timeout), then adjust security groups, firewalls, etc. and try again. For VPCs, it might be necessary to add a route.</p></div><pre class="programlisting"># curl http://{UNRAVEL_HOST_IP}:3000/version.txt</pre></li><li class="step"><p>Copy the Unravel Spark bootstrap file from Unravel Server to your Spark Qubole cluster, using <code class="code">curl</code>:</p><pre class="programlisting"># curl http://{UNRAVEL_HOST_IP}:3000/hh/unraveldata-clients/unravel_qubole_bootstrap.sh &gt; unravel_qubole_bootstrap.sh</pre><p>
                <span class="italic">Note: Substitute the actual host for UNRAVEL_HOST_IP.</span>
              </p></li><li class="step"><p>Copy Unravel Spark bootstrap file to your s3://<code class="code">Bootstrap_location_for_Spark Qubole Cluster</code></p><pre class="programlisting">aws s3 cp unravel_qubole_bootstrap.sh s3://{Bootstrap_location_for_Spark Qubole cluster}/unravel_qubole_bootstrap.sh</pre></li><li class="step"><p>In Qubole’s <span class="bold"><strong>Edit Cluster Setting</strong></span>, if you <span class="underline"><span class="bold"><strong>do not</strong></span></span> have your own customized Node Bootstrap file, add <code class="code">unravel_qubole_bootstrap.sh</code> into this field as shown in the diagram:</p><div class="mediaobject"><table style="border: 0; width: 680px; cellpadding: 0; cellspacing: 0;" class="image-viewport"><tr><td><img style="max-width: 680px; " src="../../image/15c4feff987661.png" alt="52620138.png"></img></td></tr></table></div></li><li class="step"><p>In Qubole, scripts do not take input parameters. Therefore, Unravel's bootstrap script takes all the required parameters from the Hadoop configuration. You can customize your Hadoop configuration through specific parameters within the <span class="bold"><strong>Override Hadoop Configuration Variables</strong></span> section as shown in the diagram below. As you can see, <span class="bold"><strong>unravel-bootstrap</strong></span> is the property name you must use prepend to all configuration parameters relevant to Unravel.</p><p>
                <span class="italic">Note: Separate parameters with commas.</span>
              </p><div class="mediaobject"><table style="border: 0; width: 680px; cellpadding: 0; cellspacing: 0;" class="image-viewport"><tr style="height: 400px"><td><img style="max-width: 680px; max-height: 400px; " src="../../image/15c4feff989fcd.png" alt="52620160.png"></img></td></tr></table></div></li><li class="step"><p>Add these settings to <code class="code">unravel-bootstrap</code> for Spark clusters:</p><pre class="programlisting">unravel-bootstrap=UNRAVEL_SERVER=UNRAVEL_HOST_AND_PORT, SPARK_VER_XYZ=SPARK_VER_XYZ[,SPARK_APP_LOAD_MODE=SPARK_APP_LOAD_MODE,WRAPPED_SCRIPT=WRAPPED_SCRIPT]</pre><p>
                <code class="code">SPARK_VERSION_X.Y.Z- target Spark version (eg. 1.3.0, 1.6.0, 2.0.1, etc.)</code>
              </p><div dir="ltr" class="note"><h3 class="title">Note:</h3><p>
                  <code class="code">The parameters in square brackets [ ] above are optional. Their meanings are:</code>
                </p><p><code class="code">SPARK_APP_LOAD_MODE</code> is either OPS or DEV mode, and if not explicitly specified defaults to OPS mode. For details on application loading modes, see Appendix.</p><p><code class="code">WRAPPED_SCRIPT</code> is the full S3 path to your original bootstrap script. Your bootstrap script is invoked from <code class="code">unravel_qubole_bootstrap.sh</code>.</p></div></li><li class="step"><p>Confirm that the <code class="code">unravel_es</code> service is installed:</p><ol type="a" class="substeps"><li class="step"><p>Open an SSH session to the Qubole master node.</p></li><li class="step"><p>Run this command to check that the unravel_es service has been started:</p><pre class="programlisting"># ps -aux | grep unravel_es</pre></li></ol></li></ol></div></section><section dir="ltr" class="section internal" data-origin-id="" data-time-modified="false" id="UUID-d21298d1-03a5-42e9-cb35-852185917689_id_Part3InstallUnravelSparkSensoronNeworExistingQuboleSparkCluster-OptionalAddUnravelSparkInstrumentationtoanExistingQuboleSparkCluster"><div class="titlepage"><div><div class="title"><h5 class="title">(Optional) Add Unravel Spark Instrumentation to an Existing Qubole Spark Cluster</h5></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Ensure that you have configured s3 read-only credentials in <code class="code">/usr/local/unravel/etc/s3ro.properties</code> for Unravel, as described in steps 1 and 2 above.
            </p></li><li class="step"><p>Obtain following essential Spark version files from Unravel Server:</p><ol type="a" class="substeps"><li class="step"><p>To obtain Spark version 1.6.x zip file:</p><pre class="programlisting"># wget http://{UNRAVEL_HOST_IP}:3000/hh/unravel-sensor-for-spark-bin-1.6.zip
</pre></li><li class="step"><p>To obtain Spark version 2.0.x zip file:</p><pre class="programlisting"># wget http://{UNRAVEL_HOST_IP}:3000/hh/unravel-sensor-for-spark-bin-2.0.zip</pre><div dir="ltr" class="tip"><h3 class="title">Tip</h3><p>Unzip the archive<code class="code">unravel-sensor-for-spark-bin-1.6.zip</code>and ensure via the bootstrap action that the included jars are deployed on Qubole nodes at <code class="code">PATH_TO_SENSOR_JARS</code>which is used in the configuration settings outlined in step 4.</p></div></li></ol></li><li class="step"><p>Obtain EMR jar files and snippet script that should be added to the bootstrap action to start the unravel_es process:</p><pre class="programlisting">
#wget http://{UNRAVEL_HOST_IP}:3000/hh/unraveldata-clients/snippets/run-es.sh
#wget http://{UNRAVEL_HOST_IP}:3000/hh/unravel-emr-sensor.jar
</pre><div dir="ltr" class="tip"><h3 class="title">Tip</h3><p>Ensure that <code class="code">unravel-emr-sensor.jar</code>is deployed on the Qubole nodes via the bootstrap action. Preferably, deploy <code class="code">unravel-emr-sensor.jar</code>at the same path of <code class="code">PATH_TO_SENSOR_JARS</code>as used above.</p></div></li><li class="step"><p>Edit <code class="code">run-es.sh</code> snippet script to customize following two parameters to fit into your Qubole Spark environment:</p><pre class="programlisting"># Replace following two parameters into your Qubole Spark environment #
UNRAVEL_HOST={UNRAVEL_HOST_IP}
UNRAVEL_EMR_SENSOR_JAR={PATH_TO_SENSOR_JARS}</pre></li><li class="step"><p>Spark configuration can be provided in theQubole consoleat bootstrap or directly inside<code class="code">spark-defaults.conf</code>configuration file, if the cluster is already started.</p><pre class="programlisting">spark.unravel.server.hostport {UNRAVEL_HOST_IP}:4043
spark.driver.extraJavaOptions -javaagent:{PATH_TO_SENSOR_JARS}/btrace-agent.jar=bootClassPath={PATH_TO_SENSOR_JARS}/unravel-boot.jar,systemClassPath=&lt;PATH_TO_SENSOR_JARS&gt;/unravel-sys.jar,script=DriverProbe.class:SQLProbe.class -Dcom.sun.btrace.FileClient.flush=-1
spark.executor.extraJavaOptions -javaagent:{PATH_TO_SENSOR_JARS}/btrace-agent.jar=bootClassPath={PATH_TO_SENSOR_JARS}/unravel-boot.jar,systemClassPath={PATH_TO_SENSOR_JARS}/unravel-sys.jar,script=ExecutorProbe.class -Dcom.sun.btrace.FileClient.flush=-1</pre></li><li class="step"><p>Edit <code class="code">zeppelin-env.sh</code> by appending the following values to <code class="code">ZEPPELIN_JAVA_OPTS</code> as follows:</p><pre class="programlisting">export ZEPPELIN_JAVA_OPTS="-Dcom.sun.btrace.FileClient.flush=-1 -javaagent:{PATH_TO_SENSOR_JARS}/btrace-agent.jar=bootClassPath={PATH_TO_SENSOR_JARS}/unravel-boot.jar,systemClassPath={PATH_TO_SENSOR_JARS}/unravel-sys.jar,script=DriverProbe.class:SQLProbe.class"</pre><div dir="ltr" class="tip"><h3 class="title">Tip</h3><p>The Zeppelin configuration is located at <code class="code">/usr/lib/zeppelin/conf/zeppelin-env.sh</code>.</p></div></li></ol></div></section><section dir="ltr" class="section internal" data-origin-id="" data-time-modified="false" id="UUID-d21298d1-03a5-42e9-cb35-852185917689_id_Part3InstallUnravelSparkSensoronNeworExistingQuboleSparkCluster-AppendixAppendix"><div class="titlepage"><div><div class="title"><h5 class="title">Appendix</h5></div></div></div><h6 id="UUID-d21298d1-03a5-42e9-cb35-852185917689_id_Part3InstallUnravelSparkSensoronNeworExistingQuboleSparkCluster-ApplicationLoadingModesforSparkApplicationsOPSDEVandBATCH" class="bridgehead">Application Loading Modes for Spark Applications: OPS, DEV, and BATCH</h6><p>There are three modes in which Spark applications can be loaded into Unravel Web UI:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>OPS mode shows applications in the UI after the application is done.</p></li><li class="listitem"><p>DEV mode shows applications in the UI as soon as the first job of the Spark application completes.</p></li><li class="listitem"><p>BATCH mode loads applications for which the sensor was not enabled at the time the application has been run.  </p></li></ul></div><p>You can specify the application load mode for the bootstrap script by setting <code class="code">SPARK_APP_LOAD_MODE</code> to <code class="code">OPS</code> or <code class="code">DEV</code>. By default, if not explicitly specified, <code class="code">SPARK_APP_LOAD_MODE</code> is <code class="code">OPS</code>. All three modes can coexist in the same Unravel Server. For example, all Spark applications from Qubole cluster A can be loaded in OPS mode, all Spark applications from Qubole cluster B can be loaded in DEV mode, and all Spark applications from Qubole cluster C can be loaded in BATCH mode.</p><h6 id="UUID-d21298d1-03a5-42e9-cb35-852185917689_id_Part3InstallUnravelSparkSensoronNeworExistingQuboleSparkCluster-WhentoUseWhichMode" class="bridgehead">When to Use Which Mode</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Unravel recommends using OPS mode as the cluster-side default for all Qubole clusters. The OPS mode has been rigorously benchmarked to have less than 1.3% CPU and memory overhead. Both the OPS and DEV modes use the Unravel Spark sensor, which is enabled via modifications to <code class="code">spark.driver.extraJavaOptions</code>. The key difference is that OPS mode sets <code class="code">-Dcom.unraveldata.spark.sensor.disableLiveUpdates=true</code> while DEV mode sets <code class="code">-Dcom.unraveldata.spark.sensor.disableLiveUpdates=false</code> (false is the default).</p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>DEV mode is useful during Spark application development. This mode shows a Spark application as soon as the first Spark job of the application finishes. For long running applications, this functionality is useful, as the application is shown in the UI while the application is running. In addition, DEV mode shows applications even when the Spark event log is not being persisted to HDFS or S3. This is an advantage in situations like Spark on Mesos.</p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>In a Qubole cluster that is using OPS mode as the default, DEV mode can be obtained for individual Spark applications by overriding <code class="code">spark.driver.extraJavaOptions</code> to include <code class="code">-Dcom.unraveldata.spark.sensor.disableLiveUpdates=false</code>.</p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>BATCH mode is always on and does not interfere with application performance in any way since the loading is entirely outside the application execution path. For details see the next section.</p></li></ul></div><h6 id="UUID-d21298d1-03a5-42e9-cb35-852185917689_id_Part3InstallUnravelSparkSensoronNeworExistingQuboleSparkCluster-LoadingApplicationsinBatchMode" class="bridgehead">Loading Applications in Batch Mode</h6><p>In order to load Spark apps in BATCH mode, Unravel Server must pull the Spark event log file either from S3 or from HDFS. The data collected in the UI is less detailed than when  Unravel Sensor is enabled (for instance, detailed resource usage metrics are unavailable). The BATCH mode of operation is helpful to load all of the applications that have been run in the past, before Unravel Sensor was installed. To enable the batch mode, add the following property to <code class="code">/usr/local/unravel/etc/unravel.properties</code> and restart the Spark worker daemon(s) as listed earlier:</p><pre class="programlisting">com.unraveldata.spark.eventlog.location=hdfs://NAMENODE_IP_PORT/user/spark/applicationHistory/</pre><div dir="ltr" class="note"><h3 class="title">Note:</h3><p>Currently, only one event log location is supported.</p></div></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In this section<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-d21298d1-03a5-42e9-cb35-852185917689">Part 3: Install Unravel Spark Sensor on New or Existing Qubole Spark Cluster</a></li><li><a href="#UUID-d21298d1-03a5-42e9-cb35-852185917689_id_Part3InstallUnravelSparkSensoronNeworExistingQuboleSparkCluster-Introduction">Introduction</a></li><li><a href="#UUID-d21298d1-03a5-42e9-cb35-852185917689_id_Part3InstallUnravelSparkSensoronNeworExistingQuboleSparkCluster-AddUnravelSparkInstrumentationtoNewQuboleSparkCluster">Add Unravel Spark Instrumentation to New Qubole Spark Cluster</a></li><li><a href="#UUID-d21298d1-03a5-42e9-cb35-852185917689_id_Part3InstallUnravelSparkSensoronNeworExistingQuboleSparkCluster-OptionalAddUnravelSparkInstrumentationtoanExistingQuboleSparkCluster">(Optional) Add Unravel Spark Instrumentation to an Existing Qubole Spark Cluster</a></li><li><a href="#UUID-d21298d1-03a5-42e9-cb35-852185917689_id_Part3InstallUnravelSparkSensoronNeworExistingQuboleSparkCluster-AppendixAppendix">Appendix</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div class="voting-title">Was this helpful?</div><div class="btn-group btn-group-toggle" data-toggle="buttons"><button id="feedback-yes-btn" class="btn">Yes</button><button id="feedback-no-btn" class="btn">No</button></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="part-2--install-unravel-hive-sensor-on-qubole-hadoop2-hive-cluster.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="part-4--modify-amazon-emr-cluster-bootstrap-setup.html">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2019 Unravel Data Inc. </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">2019-01-29</span></div></div></footer></div></div></div></div></body></html>
