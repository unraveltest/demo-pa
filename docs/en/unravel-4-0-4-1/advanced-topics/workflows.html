<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta charset="UTF-8"></meta><meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="no"></meta><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700|Material+Icons" rel="stylesheet"></link><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			
					var local_csh = false;
				
			var useanchorlinks = false;
			</script><title>Workflows</title><link rel="stylesheet" type="text/css" href="../../../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../../../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../../../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../../../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../../../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../../../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../../../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../../../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../../../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../../../css/5c41143e57757.css"></link><script src="../../../js/jquery-3/jquery-3.3.1.min.js" type="text/javascript"></script><script src="../../../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../../../js/materialize.min.js" type="text/javascript"></script><script src="../../../js/bootstrap.min.js" type="text/javascript"></script><script src="../../../js/purl.js" type="text/javascript"></script><script src="../../../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../../../js/html5-2.js" type="text/javascript"></script><script src="../../../js/clipboard.min.js" type="text/javascript"></script><script src="../../../js/fuse.min.js" type="text/javascript"></script><script src="../../../js/hilitor.js" type="text/javascript"></script><script src="../../../js/html5.fuse.search.js" type="text/javascript"></script><script src="../../js/fuzzydata.js" type="text/javascript"></script><script src="../../../js/csh.js" type="text/javascript"></script><meta xmlns:xlink="http://www.w3.org/1999/xlink" name="generator" content="Paligo"></meta><link rel="prev" href="sensors.html" title="Sensors"></link><link rel="next" href="custom-configurations.html" title="Custom Configurations"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><script>
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				$('.materialboxed').materialbox();
				});
			</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/googlecode.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/highlight.min.js"></script><script type="text/javascript">
				$(document).ready(function(){
				$('pre').each(function(i, block) {
				hljs.highlightBlock(block);
				});
				});
			</script></head><body class="theme1 page-toc" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix="../../"><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="https://unraveldata.com/" target="_blank"><img id="logotype-pageheader" src="../../../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav"></ul></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><a href="https://unraveldata.com/" target="_blank"><img id="logotype-pageheader" src="../../../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><ul class="toc nav nav-site-sidebar"><li><a href="../../unravel-4-0-4-1.html" class="topic-link section original-topic" data-origin-id="UUID-3477932e-f901-9628-ffc0-665f3d810fce" data-permalink="unravel-4-0-4-1.html" data-topic-level="1" data-relative-prefix="" data-time-modified="2019-01-29"><span class="glyphicon"></span> Unravel 4.0-4.1</a><ul><li><a href="../../unravel-4-0-4-1/overview.html" class="topic-link section original-topic" data-origin-id="UUID-8925312e-e09e-59aa-d923-890cb5a0c6e0" data-permalink="unravel-4-0-4-1/overview.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Overview</a><ul><li><a href="../../unravel-4-0-4-1/overview.html#UUID-88f6d89c-f684-43cd-3425-4052e4c7f7dc_id_Overview-WhereDoesUnravelServerReside" class="topic-link section internal" data-origin-id="" data-time-modified="false">Where Does Unravel Server Reside?</a></li><li><a href="../../unravel-4-0-4-1/overview.html#UUID-88f6d89c-f684-43cd-3425-4052e4c7f7dc_id_Overview-WhatDoesaBasicDeploymentProvide" class="topic-link section internal" data-origin-id="" data-time-modified="false">What Does a Basic Deployment Provide?</a></li><li><a href="../../unravel-4-0-4-1/overview.html#UUID-88f6d89c-f684-43cd-3425-4052e4c7f7dc_id_Overview-WhatAreAdvancedDeploymentOptions" class="topic-link section internal" data-origin-id="" data-time-modified="false">What Are Advanced Deployment Options?</a></li></ul></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-.html" class="topic-link section original-topic" data-origin-id="UUID-5062d1d7-d83f-10cd-dc98-6fe06db9c128" data-permalink="unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Installation Guide for Cloudera Distribution Including Apache Hadoop (CDH), with Cloudera Manager (CM)</a><ul><li><a href="../../unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-.html#UUID-e491725f-d884-0f0f-8c6f-c06bd531dcef_id_InstallationGuideforClouderaDistributionIncludingApacheHadoopCDHwithClouderaManagerCM-OrderedSteps" class="topic-link section internal" data-origin-id="" data-time-modified="false">Ordered Steps</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-/part-1--install-unravel-server-on-cdh-cm.html" class="topic-link section original-topic" data-origin-id="UUID-090904cf-b368-d040-ef90-7da702a8aa3e" data-permalink="unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-/part-1--install-unravel-server-on-cdh-cm.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 1: Install Unravel Server on CDH+CM</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-/part-2--install-unravel-sensor-parcel-on-cdh-cm.html" class="topic-link section original-topic" data-origin-id="UUID-6855ca6d-096b-8903-57cd-7b28a09e3419" data-permalink="unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-/part-2--install-unravel-sensor-parcel-on-cdh-cm.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 2: Install Unravel Sensor Parcel on CDH+CM</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-/part-3--additional-topics-for-cdh.html" class="topic-link section original-topic" data-origin-id="UUID-1f99d3c9-4fca-0697-8fc4-6060dfb28784" data-permalink="unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-/part-3--additional-topics-for-cdh.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 3: Additional Topics for CDH</a></li></ul></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-mapr.html" class="topic-link section original-topic" data-origin-id="UUID-fb61c968-3ae8-c336-5c38-00ffc8cba6a3" data-permalink="unravel-4-0-4-1/installation-guide-for-mapr.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Installation Guide for MapR</a><ul><li><a href="../../unravel-4-0-4-1/installation-guide-for-mapr.html#UUID-5204ceab-4d91-8f7c-84cf-03b60db3dc52_id_InstallationGuideforMapR-OrderedSteps" class="topic-link section internal" data-origin-id="" data-time-modified="false">Ordered Steps</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-mapr/part-1--install-unravel-server-on-mapr.html" class="topic-link section original-topic" data-origin-id="UUID-f55b6021-7c0e-cf64-fd87-1ce65603600e" data-permalink="unravel-4-0-4-1/installation-guide-for-mapr/part-1--install-unravel-server-on-mapr.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 1: Install Unravel Server on MapR</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-mapr/part-2--enable-additional-data-collection---instrumentation-for-mapr.html" class="topic-link section original-topic" data-origin-id="UUID-5a31dde8-73ba-a246-9acc-1a20142ab469" data-permalink="unravel-4-0-4-1/installation-guide-for-mapr/part-2--enable-additional-data-collection---instrumentation-for-mapr.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 2: Enable Additional Data Collection / Instrumentation for MapR</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-mapr/part-3--additional-topics-for-mapr.html" class="topic-link section original-topic" data-origin-id="UUID-0929d491-708b-e247-9033-cb65f2b3d655" data-permalink="unravel-4-0-4-1/installation-guide-for-mapr/part-3--additional-topics-for-mapr.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 3: Additional Topics for MapR</a></li></ul></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters.html" class="topic-link section original-topic" data-origin-id="UUID-604e3bcd-95c3-29e6-7dea-c2979945af64" data-permalink="unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Installation Guide for Amazon Elastic MapReduce (Amazon EMR) and Qubole Clusters</a><ul><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters.html#UUID-9a17adfa-8c96-d07d-8020-55ae3afecd31_id_InstallationGuideforAmazonElasticMapReduceAmazonEMRandQuboleClusters-OrderedSteps" class="topic-link section internal" data-origin-id="" data-time-modified="false">Ordered Steps</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-1--install-unravel-server-for-amazon-emr-or-qubole-cluster.html" class="topic-link section original-topic" data-origin-id="UUID-68b7cf9f-34f1-5af9-00c3-1ce1d6443622" data-permalink="unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-1--install-unravel-server-for-amazon-emr-or-qubole-cluster.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 1: Install Unravel Server for Amazon EMR or Qubole Cluster</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-2--install-unravel-hive-sensor-on-qubole-hadoop2-hive-cluster.html" class="topic-link section original-topic" data-origin-id="UUID-7b58715a-f121-c878-b298-2260b7ce21f4" data-permalink="unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-2--install-unravel-hive-sensor-on-qubole-hadoop2-hive-cluster.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 2: Install Unravel Hive Sensor on Qubole Hadoop2/Hive Cluster</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-3--install-unravel-spark-sensor-on-new-or-existing-qubole-spark-cluster.html" class="topic-link section original-topic" data-origin-id="UUID-2ad2e2a1-2d04-9caf-5b9a-c491ad71651f" data-permalink="unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-3--install-unravel-spark-sensor-on-new-or-existing-qubole-spark-cluster.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 3: Install Unravel Spark Sensor on New or Existing Qubole Spark Cluster</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-4--modify-amazon-emr-cluster-bootstrap-setup.html" class="topic-link section original-topic" data-origin-id="UUID-ec5f38e3-2384-1ee9-6f7a-af3750a4ff28" data-permalink="unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-4--modify-amazon-emr-cluster-bootstrap-setup.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 4: Modify Amazon EMR Cluster Bootstrap/Setup</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-5--additional-topics-for-emr-or-qubole.html" class="topic-link section original-topic" data-origin-id="UUID-468b93f7-bb6a-3ef1-09e3-cd200154be86" data-permalink="unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-5--additional-topics-for-emr-or-qubole.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 5: Additional Topics for EMR or Qubole</a></li></ul></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-.html" class="topic-link section original-topic" data-origin-id="UUID-035fb894-7e54-644d-6d2d-8919206f63a4" data-permalink="unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Installation Guide for Hortonworks Data Platform (HDP)</a><ul><li><a href="../../unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-.html#UUID-8c527b92-5389-8ada-a439-7d82e0010de8_id_InstallationGuideforHortonworksDataPlatformHDP-OrderedSteps" class="topic-link section internal" data-origin-id="" data-time-modified="false">Ordered Steps</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-/part-1--install-unravel-server-on-hdp.html" class="topic-link section original-topic" data-origin-id="UUID-c79986b8-de63-8e7b-a5e0-b0d23950aec4" data-permalink="unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-/part-1--install-unravel-server-on-hdp.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 1: Install Unravel Server on HDP</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-/part-2--enable-additional-data-collection---instrumentation-for-hdp.html" class="topic-link section original-topic" data-origin-id="UUID-4eefdc9b-be33-2733-6693-a8371067d5eb" data-permalink="unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-/part-2--enable-additional-data-collection---instrumentation-for-hdp.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 2: Enable Additional Data Collection / Instrumentation for HDP</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-/part-3--additional-topics-for-hdp.html" class="topic-link section original-topic" data-origin-id="UUID-46fb0787-8888-06b9-4579-f43f0471a93c" data-permalink="unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-/part-3--additional-topics-for-hdp.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 3: Additional Topics for HDP</a></li></ul></li><li><a href="../../unravel-4-0-4-1/user-guide.html" class="topic-link section original-topic" data-origin-id="UUID-539aa943-aeb2-c89f-5ff3-8e919a5fc15c" data-permalink="unravel-4-0-4-1/user-guide.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> User Guide</a><ul><li><a href="../../unravel-4-0-4-1/user-guide.html#UUID-08d4030d-6c2b-9e00-c3e7-d3cf3b40181d_id_UserGuide-GettingStartedGetting-Started_53157411html" class="topic-link section internal" data-origin-id="" data-time-modified="false">Getting Started</a></li><li><a href="../../unravel-4-0-4-1/user-guide.html#UUID-08d4030d-6c2b-9e00-c3e7-d3cf3b40181d_id_UserGuide-UseCasesUse-Cases_53314582html" class="topic-link section internal" data-origin-id="" data-time-modified="false">Use Cases</a></li><li><a href="../../unravel-4-0-4-1/user-guide.html#UUID-08d4030d-6c2b-9e00-c3e7-d3cf3b40181d_id_UserGuide-Notifications" class="topic-link section internal" data-origin-id="" data-time-modified="false">Notifications</a></li><li><a href="../../unravel-4-0-4-1/user-guide/getting-started.html" class="topic-link section original-topic" data-origin-id="UUID-387b73f8-53f9-6867-f563-0384106a6a7a" data-permalink="unravel-4-0-4-1/user-guide/getting-started.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Getting Started</a></li><li><a href="../../unravel-4-0-4-1/user-guide/the-operations-tab.html" class="topic-link section original-topic" data-origin-id="UUID-69d23d67-29c5-c641-0448-59ba9b42a533" data-permalink="unravel-4-0-4-1/user-guide/the-operations-tab.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">The Operations Tab</a></li><li><a href="../../unravel-4-0-4-1/user-guide/the-applications-tab.html" class="topic-link section original-topic" data-origin-id="UUID-d241cdd0-9f8c-ca9b-7872-85e8cc95d6e5" data-permalink="unravel-4-0-4-1/user-guide/the-applications-tab.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">The Applications Tab</a></li><li><a href="../../unravel-4-0-4-1/user-guide/the-data-tab.html" class="topic-link section original-topic" data-origin-id="UUID-0243c12b-bede-d4bd-1911-932d39fead1c" data-permalink="unravel-4-0-4-1/user-guide/the-data-tab.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">The Data Tab</a></li><li><a href="../../unravel-4-0-4-1/user-guide/setting-up-auto-actions--alerts-.html" class="topic-link section original-topic" data-origin-id="UUID-490fa21c-0266-c422-b7d3-dd782058c57b" data-permalink="unravel-4-0-4-1/user-guide/setting-up-auto-actions--alerts-.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Setting Up Auto Actions (Alerts)</a></li><li><a href="../../unravel-4-0-4-1/user-guide/use-cases.html" class="topic-link section original-topic" data-origin-id="UUID-36c1a9dd-2b4c-cd01-d79d-1234a68226f3" data-permalink="unravel-4-0-4-1/user-guide/use-cases.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Use Cases</a></li></ul></li><li><a href="../../unravel-4-0-4-1/unravel-server-reference.html" class="topic-link section original-topic" data-origin-id="UUID-2dcb0d02-9fe4-d98c-ac4d-c61842ef1a75" data-permalink="unravel-4-0-4-1/unravel-server-reference.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Unravel Server Reference</a><ul><li><a href="../../unravel-4-0-4-1/unravel-server-reference.html#UUID-97f67c8b-8003-5763-6265-f26a75d0bb26_id_UnravelServerReference-_bwaxof3tb14eUnravelServerDaemons" class="topic-link section internal" data-origin-id="" data-time-modified="false">Unravel Server Daemons</a></li><li><a href="../../unravel-4-0-4-1/unravel-server-reference.html#UUID-97f67c8b-8003-5763-6265-f26a75d0bb26_id_UnravelServerReference-_ranitvt6e5pgUnravelServerAdjustableProperties" class="topic-link section internal" data-origin-id="" data-time-modified="false">Unravel Server Adjustable Properties</a></li><li><a href="../../unravel-4-0-4-1/unravel-server-reference.html#UUID-97f67c8b-8003-5763-6265-f26a75d0bb26_id_UnravelServerReference-_dhjhvxwiog21AdjustableEnvironmentSettings" class="topic-link section internal" data-origin-id="" data-time-modified="false">Adjustable Environment Settings</a></li><li><a href="../../unravel-4-0-4-1/unravel-server-reference.html#UUID-97f67c8b-8003-5763-6265-f26a75d0bb26_id_UnravelServerReference-_37le18boksr8UnravelServerDirectoriesandFiles" class="topic-link section internal" data-origin-id="" data-time-modified="false">Unravel Server Directories and Files</a></li></ul></li><li><a href="../../unravel-4-0-4-1/advanced-topics.html" class="topic-link section original-topic" data-origin-id="UUID-692b04d7-91d9-3e2c-16f4-94a4256b885f" data-permalink="unravel-4-0-4-1/advanced-topics.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Advanced Topics</a><ul><li><a href="../../unravel-4-0-4-1/advanced-topics/creating-active-directory-kerberos-principals-and-keytabs-for-unravel.html" class="topic-link section original-topic" data-origin-id="UUID-0ea967e7-16b7-0350-bae1-f12eb8e21d82" data-permalink="unravel-4-0-4-1/advanced-topics/creating-active-directory-kerberos-principals-and-keytabs-for-unravel.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Creating Active Directory Kerberos Principals and Keytabs for Unravel</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/sensors.html" class="topic-link section original-topic" data-origin-id="UUID-c6fb86f3-512f-f5b6-b6c4-33d946c1ea3d" data-permalink="unravel-4-0-4-1/advanced-topics/sensors.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Sensors</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/workflows.html" class="topic-link section original-topic" data-origin-id="UUID-96d680d9-99cb-efd0-13d3-a95846cb6035" data-permalink="unravel-4-0-4-1/advanced-topics/workflows.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Workflows</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/custom-configurations.html" class="topic-link section original-topic" data-origin-id="UUID-be2d976c-3abf-a391-3c80-844c5ad6e61e" data-permalink="unravel-4-0-4-1/advanced-topics/custom-configurations.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Custom Configurations</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/connecting-to-a-hive-metastore.html" class="topic-link section original-topic" data-origin-id="UUID-36ff8b8d-6295-9064-2caf-1241cf6d9b41" data-permalink="unravel-4-0-4-1/advanced-topics/connecting-to-a-hive-metastore.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Connecting to a Hive Metastore</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/creating-an-aws-rds-cloudwatch-alarm-for-freestoragespace.html" class="topic-link section original-topic" data-origin-id="UUID-bf250233-025b-e35e-0db9-a61b9dc7696d" data-permalink="unravel-4-0-4-1/advanced-topics/creating-an-aws-rds-cloudwatch-alarm-for-freestoragespace.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Creating an AWS RDS CloudWatch Alarm for FreeStorageSpace</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/creating-application-tags.html" class="topic-link section original-topic" data-origin-id="UUID-3cbd1699-b834-2cfe-b7fd-8bfefa05631d" data-permalink="unravel-4-0-4-1/advanced-topics/creating-application-tags.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Creating Application Tags</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/troubleshooting.html" class="topic-link section original-topic" data-origin-id="UUID-944c26f0-d480-8847-cc52-3abdc9c64cec" data-permalink="unravel-4-0-4-1/advanced-topics/troubleshooting.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Troubleshooting</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/uninstalling-unravel-server.html" class="topic-link section original-topic" data-origin-id="UUID-52df0bc9-1443-3a27-b70b-f5a569410b3d" data-permalink="unravel-4-0-4-1/advanced-topics/uninstalling-unravel-server.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Uninstalling Unravel Server</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/upgrading-unravel-server.html" class="topic-link section original-topic" data-origin-id="UUID-a2b8f8bf-8edd-eb96-d2c5-64dc031e5a80" data-permalink="unravel-4-0-4-1/advanced-topics/upgrading-unravel-server.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Upgrading Unravel Server</a></li></ul></li><li><a href="../../unravel-4-0-4-1/release-notes--version-4-1-941.html" class="topic-link section original-topic" data-origin-id="UUID-64ad96d7-be99-d0cb-d940-f5a4060949d8" data-permalink="unravel-4-0-4-1/release-notes--version-4-1-941.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Release Notes: Version 4.1.941</a><ul><li><a href="../../unravel-4-0-4-1/release-notes--version-4-1-941.html#UUID-7cba538b-fd92-f5e0-3f38-b251ff6d1522_id_ReleaseNotesVersion41941-SoftwareVersion" class="topic-link section internal" data-origin-id="" data-time-modified="false">Software Version</a></li><li><a href="../../unravel-4-0-4-1/release-notes--version-4-1-941.html#UUID-7cba538b-fd92-f5e0-3f38-b251ff6d1522_id_ReleaseNotesVersion41941-NewFeatures" class="topic-link section internal" data-origin-id="" data-time-modified="false">New Features</a></li><li><a href="../../unravel-4-0-4-1/release-notes--version-4-1-941.html#UUID-7cba538b-fd92-f5e0-3f38-b251ff6d1522_id_ReleaseNotesVersion41941-TestedPlatforms" class="topic-link section internal" data-origin-id="" data-time-modified="false">Tested Platforms</a></li><li><a href="../../unravel-4-0-4-1/release-notes--version-4-1-941.html#UUID-7cba538b-fd92-f5e0-3f38-b251ff6d1522_id_ReleaseNotesVersion41941-ImprovementsBugfixes" class="topic-link section internal" data-origin-id="" data-time-modified="false">Improvements/Bugfixes</a></li><li><a href="../../unravel-4-0-4-1/release-notes--version-4-1-941.html#UUID-7cba538b-fd92-f5e0-3f38-b251ff6d1522_id_ReleaseNotesVersion41941-KnownIssues" class="topic-link section internal" data-origin-id="" data-time-modified="false">Known Issues</a></li></ul></li></ul></li></ul></aside><div class="site-content"><h1 class="publication-title">UN40 (Unravel 4.0-4.1)</h1><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="../../index-en.html">UN40 (Unravel 4.0-4.1)</a></li><li class="breadcrumb-link"><a href="../../unravel-4-0-4-1.html">Unravel 4.0-4.1</a></li><li class="breadcrumb-link"><a href="../advanced-topics.html">Advanced Topics</a></li><li class="breadcrumb-node">Workflows</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="sensors.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="custom-configurations.html">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="../../index-en.html">UN40 (Unravel 4.0-4.1)</a></li><li class="breadcrumb-link"><a href="../../unravel-4-0-4-1.html">Unravel 4.0-4.1</a></li><li class="breadcrumb-link"><a href="../advanced-topics.html">Advanced Topics</a></li><li class="breadcrumb-node">Workflows</li></ul></div><section xml:lang="en" dir="ltr" class="section original-topic" data-origin-id="UUID-96d680d9-99cb-efd0-13d3-a95846cb6035" data-permalink="unravel-4-0-4-1/advanced-topics/workflows.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29" id="UUID-bcd84db6-ae56-9108-bd13-ddd9e3bf4060"><div class="titlepage"><div><div class="title"><h4 class="title">Workflows</h4></div></div></div><section xml:lang="en" dir="ltr" class="section original-topic" data-origin-id="UUID-b76b06c0-b1cf-ce3d-1642-09be6bea7dd1" data-time-modified="2019-01-29" id="UUID-65de762e-fdc9-77c9-6b3e-c6e295c1a890"><div class="titlepage"><div><div class="title"><h5 class="title">Monitoring Airflow Workflows</h5></div></div></div><p>This article describes how to set up Unravel Server to monitor Airflow workflows so that you can see them in Unravel Web UI.</p><p>All the following steps are on the Unravel Server host that runsthe <code class="code">unravel_jcs2</code>daemon.Highlightedtext indicates where you need to substitute your particular values.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>Before you start, ensure that the Unravel Server host and the server that runs Airflow web service are in the same cluster.</p></div><h6 id="UUID-65de762e-fdc9-77c9-6b3e-c6e295c1a890_id_MonitoringAirflowWorkflows-IfYouUseHttpForAirflowWebUIAccess" class="bridgehead">If You Use Http For Airflow Web UIAccess</h6><p>Add the following 3 settings to<code class="code">/usr/local/unravel/etc/unravel.properties</code>:</p><p>Replace {airflow web url} with the full URL, starting with <code class="code">http://</code>.</p><pre class="programlisting">com.unraveldata.airflow.protocol=http
com.unraveldata.airflow.server.url={airflow web url}
com.unraveldata.airflow.available=true</pre><p>Then restartthe <code class="code">unravel_jcs2</code>daemon:</p><pre class="programlisting">sudo /etc/init.d/unravel_jcs2 restart</pre><h6 id="UUID-65de762e-fdc9-77c9-6b3e-c6e295c1a890_id_MonitoringAirflowWorkflows-IfYouUseHttpsForAirflowWebUIAccess" class="bridgehead">If You Use Https For Airflow Web UIAccess</h6><p>Add the following 4 settings to<code class="code">/usr/local/unravel/etc/unravel.properties</code>:</p><p>Replace {airflow web url} with the full URL, starting with <code class="code">http://</code>.</p><pre class="programlisting">com.unraveldata.airflow.server.url={airflow web url}
com.unraveldata.airflow.available=true
com.unraveldata.airflow.login.name={airflow web UI username}
com.unraveldata.airflow.login.password={airflow web UI password}</pre><p>Then restartthe <code class="code">unravel_jcs2</code>daemon:</p><pre class="programlisting">sudo /etc/init.d/unravel_jcs2 restart</pre><h6 id="UUID-65de762e-fdc9-77c9-6b3e-c6e295c1a890_id_MonitoringAirflowWorkflows-ChangingtheRangeofMonitoring" class="bridgehead">Changing the Range of Monitoring</h6><p>By default, Unravel Server ingests all the workflows that started within the last 5 days. If you wish to change the date range to the last<code class="code">x</code>days, do the following:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Add the following configuration to <code class="code">/usr/local/unravel/etc/unravel.properties</code>.Note there’s a “-” (minus sign) in the value.</p><pre class="programlisting">airflow.look.back.num.days=-x</pre></li><li class="step"><p>Restartthe <code class="code">unravel_jcs2</code>daemon:</p><pre class="programlisting">sudo /etc/init.d/unravel_jcs2 restart</pre></li></ol></div></section><section xml:lang="en" dir="ltr" class="section original-topic" data-origin-id="UUID-03eaafc7-38aa-64a9-4488-2868b079a4b9" data-time-modified="2019-01-29" id="UUID-26fde14b-e820-e7e0-09d1-fcd5b8f8bcd5"><div class="titlepage"><div><div class="title"><h5 class="title">Monitoring Oozie Workflows</h5></div></div></div><h6 id="UUID-26fde14b-e820-e7e0-09d1-fcd5b8f8bcd5_id_MonitoringOozieWorkflows-EnablingOozie" class="bridgehead">Enabling Oozie</h6><p>In <code class="code">unravel.properties</code>, update the <code class="code">oozie.server.url</code> property with appropriate value. <code class="code"></code></p><pre class="programlisting">sudo vi /usr/local/unravel/etc/unravel.properties</pre><h6 id="UUID-26fde14b-e820-e7e0-09d1-fcd5b8f8bcd5_id_MonitoringOozieWorkflows-EnablingAirFlow" class="bridgehead">Enabling AirFlow</h6><p>The script below, <code class="code">spark-test.py</code>, is a sample script for Spark.</p><p> <span class="bold"><strong>spark-test.py</strong></span> </p><pre class="programlisting">from airflow import DAG
from airflow.operators.bash_operator import BashOperator
from airflow.operators import PythonOperator
from datetime import datetime, timedelta
import subprocess


default_args = {
    'owner': 'airflow',
    'depends_on_past': False,
    'start_date': datetime(2015, 6, 1),
    'email': ['airflow@airflow.com'],
    'email_on_failure': False,
    'email_on_retry': False,
    'retries': 1,
    'retry_delay': timedelta(minutes=5),
    # 'queue': 'bash_queue',
    # 'pool': 'backfill',
    # 'priority_weight': 10,
    # 'end_date': datetime(2016, 1, 1),
}
</pre><p>In Oozie/Airflow, workflows are represented by directed acyclic graphs (DAGs). For example,</p><pre class="programlisting">dag = DAG('spark-test', default_args=default_args)
</pre><h6 id="UUID-26fde14b-e820-e7e0-09d1-fcd5b8f8bcd5_id_MonitoringOozieWorkflows-1AddHooksforUnravelInstrumentation" class="bridgehead">1. Add Hooks for Unravel Instrumentation</h6><p>The example below shows the contents of a bash script, <code class="code">example-hdp-client.sh</code>, that can be invoked to submit an Airflow Spark application via <code class="code">spark-submit</code>. This script adds hooks for Unravel instrumentation by setting three Unravel-specific configuration parameters for Spark applications:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <code class="code">spark.driver.extraJavaOptions</code> </p></li><li class="listitem"><p> <code class="code">spark.executor.extraJavaOptions</code> </p></li><li class="listitem"><p> <code class="code">spark.unravel.server.hostport</code> </p></li></ul></div><p>Setting these parameters on a <span class="bold"><strong>per-application</strong></span> basis is recommended when you only want to monitor/profile certain applications, rather than all the applications running in the cluster. Alternatively, you can specify these parameters in <code class="code">spark-defaults.conf</code>.</p><p>This script references the following variables, which you would need to edit:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <code class="code">PATH_TO_SPARK_EXAMPLE_JAR=/usr/hdp/2.3.6.0-3796/spark/lib/spark-examples-*.jar</code> </p></li><li class="listitem"><p> <code class="code">UNRAVEL_SERVER_IP_PORT=10.20.30.40:4043</code> </p></li><li class="listitem"><p> <code class="code">SPARK_EVENT_LOG_DIR=hdfs://ip-10-0-0-21.ec2.internal:8020/user/ec2-user/eventlog</code> </p></li></ul></div><p> <span class="bold"><strong>example-hdp-client.sh</strong></span> </p><pre class="programlisting">hdfs dfs -rmr pair.parquet
spark-submit \
--class org.apache.spark.examples.sql.RDDRelation \
--master yarn-cluster \
--conf "spark.driver.extraJavaOptions=-javaagent:/usr/local/unravel_client/btrace-agent.jar=unsafe=true,stdout=false,noServer=true,startupRetransform=false,bootClassPath=/usr/local/unravel_client/unravel-boot.jar,systemClassPath=/usr/local/unravel_client/unravel-sys.jar,scriptOutputFile=/dev/null,script=DriverProbe.class:SQLProbe.class -Dcom.sun.btrace.FileClient.flush=-1 -Dcom.unraveldata.spark.sensor.disableLiveUpdates=true" \
--conf "spark.executor.extraJavaOptions=-javaagent:/usr/local/unravel_client/btrace-agent.jar=unsafe=true,stdout=false,noServer=true,startupRetransform=false,bootClassPath=/usr/local/unravel_client/unravel-boot.jar,systemClassPath=/usr/local/unravel_client/unravel-sys.jar,scriptOutputFile=/dev/null,script=ExecutorProbe.class -Dcom.sun.btrace.FileClient.flush=-1" \
--conf "spark.unravel.server.hostport=$UNRAVEL_SERVER_IP_PORT" \
--conf "spark.eventLog.dir=$SPARK_EVENT_LOG_DIR" \
--conf "spark.eventLog.enabled=true" \
$PATH_TO_SPARK_EXAMPLE_JAR</pre><h6 id="UUID-26fde14b-e820-e7e0-09d1-fcd5b8f8bcd5_id_MonitoringOozieWorkflows-2SubmittheWorkflow" class="bridgehead">2. Submit the Workflow</h6><p>Operators (also called tasks) determine execution order (dependencies). In the example below, <code class="code">t1</code> and <code class="code">t2</code> are operators created by <code class="code">BashOperator</code> or <code class="code">PythonOperator</code>. They invoke <code class="code">example-hdp-client.sh</code>, which submits the workflow for execution.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>Note: The pathname of <code class="code">example-hdp-client.sh</code> is relative to the current directory, not to <code class="code">~/airflow/dags</code> as in the Airflow operator above!</p></div><pre class="programlisting">t1 = BashOperator(
task_id='example-hdp-client',
bash_command="example-scripts/example-hdp-client.sh",
retries=3,
dag=dag)


def spark_callback(**kwargs):
sp
 = subprocess.Popen(['/bin/bash', 
'airflow/dags/example-scripts/example-hdp-client.sh'], 
stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
print sp.stdout.read()


t2 = PythonOperator(
task_id='example-python-call',
provide_context=True,
python_callable=spark_callback,
retries=1,
dag=dag)


t2.set_upstream(t1)
</pre><div dir="ltr" class="tip"><h3 class="title">Tip</h3><p>You can test the operators first. For example, in Airflow:</p><pre class="programlisting">airflow test spark-test example-python-call 2016-08-30</pre></div><h6 id="UUID-26fde14b-e820-e7e0-09d1-fcd5b8f8bcd5_id_MonitoringOozieWorkflows-3MonitortheWorkflow" class="bridgehead">3. Monitor the Workflow</h6><p>To see the new Oozie workflow in Unravel Web UI, select <span class="bold"><strong>APPLICATIONS</strong></span> | <span class="bold"><strong>Workflows</strong></span>, and then click <span class="bold"><strong>Add Workflow</strong></span>.</p></section><section xml:lang="en" dir="ltr" class="section original-topic" data-origin-id="UUID-a9241d65-c474-14c6-5f62-d82ac02865e2" data-time-modified="2019-01-29" id="UUID-420bc84e-d12f-443f-56a0-3bb29526ab8e"><div class="titlepage"><div><div class="title"><h5 class="title">Tagging Workflows</h5></div></div></div><h6 id="UUID-420bc84e-d12f-443f-56a0-3bb29526ab8e_id_TaggingWorkflows-AboutUnravelTags" class="bridgehead">About Unravel Tags</h6><p>You can add two Unravel tags (key-value pairs) to mark queries and jobs that belong to a particular workflow:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="code">unravel.workflow.name</code>: a string that represents the name of the workflow. Recommended format is <code class="code">TenantName-ProjectName-WorkflowName</code>.</p></li><li class="listitem"><p><code class="code">unravel.workflow.utctimestamp</code>: a timestamp in <span class="italic"><code class="code">yyyyMMddThhmmssZ</code></span> format that represents the logical time of a run of the workflow in UTC/ISO format. In UNIX/LINUX bash, you can get a timestamp in UTC format by running the command "<code class="code">$(date -u '+%Y%m%dT%H%M%SZ')</code>".</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>Do not put quotes ("") or blank spaces in/around the tag keys or values. For example:</p><div class="itemizedlist"><ul style="list-style-type: circle; " class="itemizedlist"><li class="listitem"><p><code class="code">SET unravel.workflow.name="ETL-Workflow";</code> [Wrong usage]</p></li><li class="listitem"><p><code class="code">SET unravel.workflow.name=ETL-Workflow;</code> [Correct usage]</p></li></ul></div></div></li></ul></div><p>Please note the following:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Different runs of the <span class="bold"><strong>same</strong></span> workflow have the <span class="bold"><strong>same</strong></span> value for <code class="code">unravel.workflow.name</code>.</p></li><li class="listitem"><p>Different runs of the <span class="bold"><strong>same</strong></span> workflow have <span class="bold"><strong>different</strong></span> values for <code class="code">unravel.workflow.utctimestamp</code>.</p></li><li class="listitem"><p>Different workflows have different values for <code class="code">unravel.workflow.name</code>.</p></li></ul></div><p>The example below shows a Hive query that is marked as part of the <code class="code">Financial-Tenant-ETL-Workflow</code> workflow that was run on February 1, 2016:</p><pre class="programlisting">SET unravel.workflow.name=Financial-Tenant-ETL-Workflow;
SET unravel.workflow.utctimestamp=20160201T000000Z;

SELECT foo FROM table WHERE … [Rest of Hive Query text goes here]</pre><h6 id="UUID-420bc84e-d12f-443f-56a0-3bb29526ab8e_id_TaggingWorkflows-EasyRecipesforTaggingWorkflows" class="bridgehead">Easy Recipes for Tagging Workflows</h6><p>First, export the workflow name and UTC timestamp from your top-level script that schedules each run of the workflow:</p><p>Export the workflow name:</p><pre class="programlisting">export WORKFLOW_NAME=Financial-Tenant-ETL-Workflow</pre><p>
          Export the UTC timestamp for this run of the workflow. Here, we use bash's <code class="code">date</code> command:</p><pre class="programlisting">export UTC_TIME_STAMP=$(date -u '+%Y%m%dT%H%M%SZ')</pre><p>Then follow the appropriate instructions below:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              Tagging a Hive query
            </p></li><li class="listitem"><p>
              Tagging a Sqoop job
            </p></li><li class="listitem"><p>
              Tagging a direct MapReduce job
            </p></li><li class="listitem"><p>
              Tagging a Spark job
            </p></li><li class="listitem"><p>
              Tagging a Pig job
            </p></li><li class="listitem"><p>
              Tagging a Impala query
            </p></li></ul></div><h6 id="UUID-420bc84e-d12f-443f-56a0-3bb29526ab8e_id_TaggingWorkflows-TagHiveHowtoTagaHiveQueryUsingSETCommandsinHive" class="bridgehead">How to Tag a Hive Query Using SET Commands in Hive</h6><pre class="programlisting">hive -f hive/simple_wf.hql </pre><p>In <code class="code">hive/simple_wf.hql</code>:</p><pre class="programlisting">SET unravel.workflow.name=${env:WORKFLOW_NAME};
SET unravel.workflow.utctimestamp=${env:UTC_TIME_STAMP};
select count(1) from lineitem;</pre><h6 id="UUID-420bc84e-d12f-443f-56a0-3bb29526ab8e_id_TaggingWorkflows-TagSqoopHowtoTagaSqoopJobUsingDCommandLineParameters" class="bridgehead">How to Tag a Sqoop Job Using –D Command Line Parameters</h6><pre class="programlisting">sqoop export \
 *-D"unravel.workflow.name=$WORKFLOW_NAME" -D"unravel.workflow.utctimestamp=$UTC_TIME_STAMP" * \
 --connect jdbc:mysql://127.0.0.1:3316/unravel_mysql_prod --table settings -m 1 \
 --export-dir /tmp/sqoop_test --username unravel --verbose --password foobar</pre><h6 id="UUID-420bc84e-d12f-443f-56a0-3bb29526ab8e_id_TaggingWorkflows-TagMapReduceHowtoTagaDirectMapReduceJobUsingDCommandLineParameters" class="bridgehead">How to Tag a Direct MapReduce Job Using –D Command Line Parameters</h6><pre class="programlisting">hadoop jar libs/ooziemr-1.0.jar com.unraveldata.mr.apps.Driver \
*-D"unravel.workflow.name=$WORKFLOW_NAME" -D"unravel.workflow.utctimestamp=$UTC_TIME_STAMP" * \
-p /wordcount.properties -input /tmp/soumitra/data/small -output /tmp/soumitra/outsmoke</pre><h6 id="UUID-420bc84e-d12f-443f-56a0-3bb29526ab8e_id_TaggingWorkflows-TagSparkHowtoTagaSparkJobUsing--confCommandLineParameters" class="bridgehead">How to Tag a Spark Job Using --conf Command Line Parameters</h6><div dir="ltr" class="note"><h3 class="title">Note</h3><p>For Spark jobs, you must prefix the Unravel tags with "<code class="code">spark.</code>". For example, <code class="code"><a class="link" href="http://unravel.workflow.name" target="_blank">unravel.workflow.name</a></code> becomes <code class="code"><a class="link" href="http://spark.unravel.workflow.name" target="_blank">spark.unravel.workflow.name</a></code>.</p></div><pre class="programlisting">spark-submit \
 *   --conf "spark.unravel.workflow.name=$WORKFLOW_NAME" *
 *   --conf "spark.unravel.workflow.utctimestamp=$UTC_TIME_STAMP" *
    --conf "spark.eventLog.enabled=true" \
    --class org.apache.spark.examples.SparkPi \
    --master yarn-cluster \
    --deploy-mode cluster</pre><h6 id="UUID-420bc84e-d12f-443f-56a0-3bb29526ab8e_id_TaggingWorkflows-TagPigHowtoTagaPigJobUsingparamandSETCommands" class="bridgehead">How to Tag a Pig Job Using –param and SET Commands</h6><pre class="programlisting">pig \
*-param WORKFLOW_NAME=$WORKFLOW_NAME -param UTC_TIME_STAMP=$UTC_TIME_STAMP * \
-x mapreduce -f pig/simple.pig</pre><p> In <code class="code">pig/simple.pig</code>:</p><pre class="programlisting">SET unravel.workflow.name $WORKFLOW_NAME;
SET unravel.workflow.utctimestamp $UTC_TIME_STAMP;

lines = LOAD '/tmp/soumitra/data/small' using PigStorage('|') AS (line:chararray);
words = FOREACH lines GENERATE FLATTEN(TOKENIZE(line)) as word;
grouped = GROUP words BY word;
wordcount = FOREACH grouped GENERATE group, COUNT(words);
DUMP wordcount;</pre><h6 id="UUID-420bc84e-d12f-443f-56a0-3bb29526ab8e_id_TaggingWorkflows-TagImpalaHowtoTagaImpalaJobUsing-query_optionsandSETCommand" class="bridgehead">How to Tag a Impala Job Using –-query_options and SET Command</h6><p>User can set DEBUG_ACTION in Impala script to pass the workflow tags into impala queries:</p><pre class="programlisting">SET DEBUG_ACTION=|unravel.workflow.name::{$WORKFLOW_NAME}|unravel.workflow.utctimestamp::{$WORKFLOW_TIMESTAMP};</pre><p>According to this CDH article: <a class="link" href="https://www.cloudera.com/documentation/enterprise/5-14-x/topics/impala_query_options.html" target="_blank">https://www.cloudera.com/documentation/enterprise/5-14-x/topics/impala_query_options.html</a>, user can pass in query options via --query_options in CDH 5.14 / Impala 2.11 and later:</p><pre class="programlisting">impala-shell --query_option=DEBUG_ACTION=|unravel.workflow.name::{$WORKFLOW_NAME}|unravel.workflow.utctimestamp::{$WORKFLOW_TIMESTAMP}| -f impala.script</pre><p>Note: the tagging option should be turned on for this tagging to work. ie, the followings need to be set in unravel.properties:</p><pre class="programlisting"># Tagging
com.unraveldata.tagging.script.enabled=true
com.unraveldata.app.tagging.script.path=/tmp/app_tag.py
com.unraveldata.app.tagging.script.method.name=get_tags</pre><h6 id="UUID-420bc84e-d12f-443f-56a0-3bb29526ab8e_id_TaggingWorkflows-FindingWorkflowsinUnravelWebUI" class="bridgehead">Finding Workflows in Unravel Web UI</h6><p>Once your tagged workflows have been run, go log into Unravel Web UI and select <span class="bold"><strong>Application</strong></span> | <span class="bold"><strong>Workflow</strong></span> to start exploring Unravel's Workflow Management features, as illustrated in the screenshot below.</p><div class="mediaobject"><table style="border: 0; width: 624px; cellpadding: 0; cellspacing: 0;" class="image-viewport"><tr style="height: 414px"><td><img style="max-width: 624px; max-height: 414px; " src="../../image/15c4feffa30440.png" alt="51192096.png"></img></td></tr></table></div></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In this section<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-bcd84db6-ae56-9108-bd13-ddd9e3bf4060">Workflows</a></li><li><a href="#UUID-65de762e-fdc9-77c9-6b3e-c6e295c1a890">Monitoring Airflow Workflows</a></li><li><a href="#UUID-26fde14b-e820-e7e0-09d1-fcd5b8f8bcd5">Monitoring Oozie Workflows</a></li><li><a href="#UUID-420bc84e-d12f-443f-56a0-3bb29526ab8e">Tagging Workflows</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div class="voting-title">Was this helpful?</div><div class="btn-group btn-group-toggle" data-toggle="buttons"><button id="feedback-yes-btn" class="btn">Yes</button><button id="feedback-no-btn" class="btn">No</button></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="sensors.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="custom-configurations.html">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2019 Unravel Data Inc. </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">2019-01-29</span></div></div></footer></div></div></div></div></body></html>
