<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta charset="UTF-8"></meta><meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="no"></meta><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700|Material+Icons" rel="stylesheet"></link><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			
					var local_csh = false;
				
			var useanchorlinks = false;
			</script><title>Part 2: Install Unravel Sensor Parcel on CDH+CM</title><link rel="stylesheet" type="text/css" href="../../../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../../../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../../../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../../../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../../../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../../../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../../../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../../../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../../../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../../../css/5c41143e57757.css"></link><script src="../../../js/jquery-3/jquery-3.3.1.min.js" type="text/javascript"></script><script src="../../../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../../../js/materialize.min.js" type="text/javascript"></script><script src="../../../js/bootstrap.min.js" type="text/javascript"></script><script src="../../../js/purl.js" type="text/javascript"></script><script src="../../../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../../../js/html5-2.js" type="text/javascript"></script><script src="../../../js/clipboard.min.js" type="text/javascript"></script><script src="../../../js/fuse.min.js" type="text/javascript"></script><script src="../../../js/hilitor.js" type="text/javascript"></script><script src="../../../js/html5.fuse.search.js" type="text/javascript"></script><script src="../../js/fuzzydata.js" type="text/javascript"></script><script src="../../../js/csh.js" type="text/javascript"></script><meta xmlns:xlink="http://www.w3.org/1999/xlink" name="generator" content="Paligo"></meta><link rel="prev" href="part-1--install-unravel-server-on-cdh-cm.html" title="Part 1: Install Unravel Server on CDH+CM"></link><link rel="next" href="part-3--additional-topics-for-cdh.html" title="Part 3: Additional Topics for CDH"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><script>
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				$('.materialboxed').materialbox();
				});
			</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/googlecode.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/highlight.min.js"></script><script type="text/javascript">
				$(document).ready(function(){
				$('pre').each(function(i, block) {
				hljs.highlightBlock(block);
				});
				});
			</script></head><body class="theme1 page-toc" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix="../../"><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="https://unraveldata.com/" target="_blank"><img id="logotype-pageheader" src="../../../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav"></ul></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><a href="https://unraveldata.com/" target="_blank"><img id="logotype-pageheader" src="../../../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><ul class="toc nav nav-site-sidebar"><li><a href="../../unravel-4-0-4-1.html" class="topic-link section original-topic" data-origin-id="UUID-3477932e-f901-9628-ffc0-665f3d810fce" data-permalink="unravel-4-0-4-1.html" data-topic-level="1" data-relative-prefix="" data-time-modified="2019-01-29"><span class="glyphicon"></span> Unravel 4.0-4.1</a><ul><li><a href="../../unravel-4-0-4-1/overview.html" class="topic-link section original-topic" data-origin-id="UUID-8925312e-e09e-59aa-d923-890cb5a0c6e0" data-permalink="unravel-4-0-4-1/overview.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Overview</a><ul><li><a href="../../unravel-4-0-4-1/overview.html#UUID-88f6d89c-f684-43cd-3425-4052e4c7f7dc_id_Overview-WhereDoesUnravelServerReside" class="topic-link section internal" data-origin-id="" data-time-modified="false">Where Does Unravel Server Reside?</a></li><li><a href="../../unravel-4-0-4-1/overview.html#UUID-88f6d89c-f684-43cd-3425-4052e4c7f7dc_id_Overview-WhatDoesaBasicDeploymentProvide" class="topic-link section internal" data-origin-id="" data-time-modified="false">What Does a Basic Deployment Provide?</a></li><li><a href="../../unravel-4-0-4-1/overview.html#UUID-88f6d89c-f684-43cd-3425-4052e4c7f7dc_id_Overview-WhatAreAdvancedDeploymentOptions" class="topic-link section internal" data-origin-id="" data-time-modified="false">What Are Advanced Deployment Options?</a></li></ul></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-.html" class="topic-link section original-topic" data-origin-id="UUID-5062d1d7-d83f-10cd-dc98-6fe06db9c128" data-permalink="unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Installation Guide for Cloudera Distribution Including Apache Hadoop (CDH), with Cloudera Manager (CM)</a><ul><li><a href="../../unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-.html#UUID-e491725f-d884-0f0f-8c6f-c06bd531dcef_id_InstallationGuideforClouderaDistributionIncludingApacheHadoopCDHwithClouderaManagerCM-OrderedSteps" class="topic-link section internal" data-origin-id="" data-time-modified="false">Ordered Steps</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-/part-1--install-unravel-server-on-cdh-cm.html" class="topic-link section original-topic" data-origin-id="UUID-090904cf-b368-d040-ef90-7da702a8aa3e" data-permalink="unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-/part-1--install-unravel-server-on-cdh-cm.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 1: Install Unravel Server on CDH+CM</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-/part-2--install-unravel-sensor-parcel-on-cdh-cm.html" class="topic-link section original-topic" data-origin-id="UUID-6855ca6d-096b-8903-57cd-7b28a09e3419" data-permalink="unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-/part-2--install-unravel-sensor-parcel-on-cdh-cm.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 2: Install Unravel Sensor Parcel on CDH+CM</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-/part-3--additional-topics-for-cdh.html" class="topic-link section original-topic" data-origin-id="UUID-1f99d3c9-4fca-0697-8fc4-6060dfb28784" data-permalink="unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-/part-3--additional-topics-for-cdh.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 3: Additional Topics for CDH</a></li></ul></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-mapr.html" class="topic-link section original-topic" data-origin-id="UUID-fb61c968-3ae8-c336-5c38-00ffc8cba6a3" data-permalink="unravel-4-0-4-1/installation-guide-for-mapr.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Installation Guide for MapR</a><ul><li><a href="../../unravel-4-0-4-1/installation-guide-for-mapr.html#UUID-5204ceab-4d91-8f7c-84cf-03b60db3dc52_id_InstallationGuideforMapR-OrderedSteps" class="topic-link section internal" data-origin-id="" data-time-modified="false">Ordered Steps</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-mapr/part-1--install-unravel-server-on-mapr.html" class="topic-link section original-topic" data-origin-id="UUID-f55b6021-7c0e-cf64-fd87-1ce65603600e" data-permalink="unravel-4-0-4-1/installation-guide-for-mapr/part-1--install-unravel-server-on-mapr.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 1: Install Unravel Server on MapR</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-mapr/part-2--enable-additional-data-collection---instrumentation-for-mapr.html" class="topic-link section original-topic" data-origin-id="UUID-5a31dde8-73ba-a246-9acc-1a20142ab469" data-permalink="unravel-4-0-4-1/installation-guide-for-mapr/part-2--enable-additional-data-collection---instrumentation-for-mapr.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 2: Enable Additional Data Collection / Instrumentation for MapR</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-mapr/part-3--additional-topics-for-mapr.html" class="topic-link section original-topic" data-origin-id="UUID-0929d491-708b-e247-9033-cb65f2b3d655" data-permalink="unravel-4-0-4-1/installation-guide-for-mapr/part-3--additional-topics-for-mapr.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 3: Additional Topics for MapR</a></li></ul></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters.html" class="topic-link section original-topic" data-origin-id="UUID-604e3bcd-95c3-29e6-7dea-c2979945af64" data-permalink="unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Installation Guide for Amazon Elastic MapReduce (Amazon EMR) and Qubole Clusters</a><ul><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters.html#UUID-9a17adfa-8c96-d07d-8020-55ae3afecd31_id_InstallationGuideforAmazonElasticMapReduceAmazonEMRandQuboleClusters-OrderedSteps" class="topic-link section internal" data-origin-id="" data-time-modified="false">Ordered Steps</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-1--install-unravel-server-for-amazon-emr-or-qubole-cluster.html" class="topic-link section original-topic" data-origin-id="UUID-68b7cf9f-34f1-5af9-00c3-1ce1d6443622" data-permalink="unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-1--install-unravel-server-for-amazon-emr-or-qubole-cluster.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 1: Install Unravel Server for Amazon EMR or Qubole Cluster</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-2--install-unravel-hive-sensor-on-qubole-hadoop2-hive-cluster.html" class="topic-link section original-topic" data-origin-id="UUID-7b58715a-f121-c878-b298-2260b7ce21f4" data-permalink="unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-2--install-unravel-hive-sensor-on-qubole-hadoop2-hive-cluster.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 2: Install Unravel Hive Sensor on Qubole Hadoop2/Hive Cluster</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-3--install-unravel-spark-sensor-on-new-or-existing-qubole-spark-cluster.html" class="topic-link section original-topic" data-origin-id="UUID-2ad2e2a1-2d04-9caf-5b9a-c491ad71651f" data-permalink="unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-3--install-unravel-spark-sensor-on-new-or-existing-qubole-spark-cluster.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 3: Install Unravel Spark Sensor on New or Existing Qubole Spark Cluster</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-4--modify-amazon-emr-cluster-bootstrap-setup.html" class="topic-link section original-topic" data-origin-id="UUID-ec5f38e3-2384-1ee9-6f7a-af3750a4ff28" data-permalink="unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-4--modify-amazon-emr-cluster-bootstrap-setup.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 4: Modify Amazon EMR Cluster Bootstrap/Setup</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-5--additional-topics-for-emr-or-qubole.html" class="topic-link section original-topic" data-origin-id="UUID-468b93f7-bb6a-3ef1-09e3-cd200154be86" data-permalink="unravel-4-0-4-1/installation-guide-for-amazon-elastic-mapreduce--amazon-emr--and-qubole-clusters/part-5--additional-topics-for-emr-or-qubole.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 5: Additional Topics for EMR or Qubole</a></li></ul></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-.html" class="topic-link section original-topic" data-origin-id="UUID-035fb894-7e54-644d-6d2d-8919206f63a4" data-permalink="unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Installation Guide for Hortonworks Data Platform (HDP)</a><ul><li><a href="../../unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-.html#UUID-8c527b92-5389-8ada-a439-7d82e0010de8_id_InstallationGuideforHortonworksDataPlatformHDP-OrderedSteps" class="topic-link section internal" data-origin-id="" data-time-modified="false">Ordered Steps</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-/part-1--install-unravel-server-on-hdp.html" class="topic-link section original-topic" data-origin-id="UUID-c79986b8-de63-8e7b-a5e0-b0d23950aec4" data-permalink="unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-/part-1--install-unravel-server-on-hdp.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 1: Install Unravel Server on HDP</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-/part-2--enable-additional-data-collection---instrumentation-for-hdp.html" class="topic-link section original-topic" data-origin-id="UUID-4eefdc9b-be33-2733-6693-a8371067d5eb" data-permalink="unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-/part-2--enable-additional-data-collection---instrumentation-for-hdp.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 2: Enable Additional Data Collection / Instrumentation for HDP</a></li><li><a href="../../unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-/part-3--additional-topics-for-hdp.html" class="topic-link section original-topic" data-origin-id="UUID-46fb0787-8888-06b9-4579-f43f0471a93c" data-permalink="unravel-4-0-4-1/installation-guide-for-hortonworks-data-platform--hdp-/part-3--additional-topics-for-hdp.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Part 3: Additional Topics for HDP</a></li></ul></li><li><a href="../../unravel-4-0-4-1/user-guide.html" class="topic-link section original-topic" data-origin-id="UUID-539aa943-aeb2-c89f-5ff3-8e919a5fc15c" data-permalink="unravel-4-0-4-1/user-guide.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> User Guide</a><ul><li><a href="../../unravel-4-0-4-1/user-guide.html#UUID-08d4030d-6c2b-9e00-c3e7-d3cf3b40181d_id_UserGuide-GettingStartedGetting-Started_53157411html" class="topic-link section internal" data-origin-id="" data-time-modified="false">Getting Started</a></li><li><a href="../../unravel-4-0-4-1/user-guide.html#UUID-08d4030d-6c2b-9e00-c3e7-d3cf3b40181d_id_UserGuide-UseCasesUse-Cases_53314582html" class="topic-link section internal" data-origin-id="" data-time-modified="false">Use Cases</a></li><li><a href="../../unravel-4-0-4-1/user-guide.html#UUID-08d4030d-6c2b-9e00-c3e7-d3cf3b40181d_id_UserGuide-Notifications" class="topic-link section internal" data-origin-id="" data-time-modified="false">Notifications</a></li><li><a href="../../unravel-4-0-4-1/user-guide/getting-started.html" class="topic-link section original-topic" data-origin-id="UUID-387b73f8-53f9-6867-f563-0384106a6a7a" data-permalink="unravel-4-0-4-1/user-guide/getting-started.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Getting Started</a></li><li><a href="../../unravel-4-0-4-1/user-guide/the-operations-tab.html" class="topic-link section original-topic" data-origin-id="UUID-69d23d67-29c5-c641-0448-59ba9b42a533" data-permalink="unravel-4-0-4-1/user-guide/the-operations-tab.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">The Operations Tab</a></li><li><a href="../../unravel-4-0-4-1/user-guide/the-applications-tab.html" class="topic-link section original-topic" data-origin-id="UUID-d241cdd0-9f8c-ca9b-7872-85e8cc95d6e5" data-permalink="unravel-4-0-4-1/user-guide/the-applications-tab.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">The Applications Tab</a></li><li><a href="../../unravel-4-0-4-1/user-guide/the-data-tab.html" class="topic-link section original-topic" data-origin-id="UUID-0243c12b-bede-d4bd-1911-932d39fead1c" data-permalink="unravel-4-0-4-1/user-guide/the-data-tab.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">The Data Tab</a></li><li><a href="../../unravel-4-0-4-1/user-guide/setting-up-auto-actions--alerts-.html" class="topic-link section original-topic" data-origin-id="UUID-490fa21c-0266-c422-b7d3-dd782058c57b" data-permalink="unravel-4-0-4-1/user-guide/setting-up-auto-actions--alerts-.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Setting Up Auto Actions (Alerts)</a></li><li><a href="../../unravel-4-0-4-1/user-guide/use-cases.html" class="topic-link section original-topic" data-origin-id="UUID-36c1a9dd-2b4c-cd01-d79d-1234a68226f3" data-permalink="unravel-4-0-4-1/user-guide/use-cases.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Use Cases</a></li></ul></li><li><a href="../../unravel-4-0-4-1/unravel-server-reference.html" class="topic-link section original-topic" data-origin-id="UUID-2dcb0d02-9fe4-d98c-ac4d-c61842ef1a75" data-permalink="unravel-4-0-4-1/unravel-server-reference.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Unravel Server Reference</a><ul><li><a href="../../unravel-4-0-4-1/unravel-server-reference.html#UUID-97f67c8b-8003-5763-6265-f26a75d0bb26_id_UnravelServerReference-_bwaxof3tb14eUnravelServerDaemons" class="topic-link section internal" data-origin-id="" data-time-modified="false">Unravel Server Daemons</a></li><li><a href="../../unravel-4-0-4-1/unravel-server-reference.html#UUID-97f67c8b-8003-5763-6265-f26a75d0bb26_id_UnravelServerReference-_ranitvt6e5pgUnravelServerAdjustableProperties" class="topic-link section internal" data-origin-id="" data-time-modified="false">Unravel Server Adjustable Properties</a></li><li><a href="../../unravel-4-0-4-1/unravel-server-reference.html#UUID-97f67c8b-8003-5763-6265-f26a75d0bb26_id_UnravelServerReference-_dhjhvxwiog21AdjustableEnvironmentSettings" class="topic-link section internal" data-origin-id="" data-time-modified="false">Adjustable Environment Settings</a></li><li><a href="../../unravel-4-0-4-1/unravel-server-reference.html#UUID-97f67c8b-8003-5763-6265-f26a75d0bb26_id_UnravelServerReference-_37le18boksr8UnravelServerDirectoriesandFiles" class="topic-link section internal" data-origin-id="" data-time-modified="false">Unravel Server Directories and Files</a></li></ul></li><li><a href="../../unravel-4-0-4-1/advanced-topics.html" class="topic-link section original-topic" data-origin-id="UUID-692b04d7-91d9-3e2c-16f4-94a4256b885f" data-permalink="unravel-4-0-4-1/advanced-topics.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Advanced Topics</a><ul><li><a href="../../unravel-4-0-4-1/advanced-topics/creating-active-directory-kerberos-principals-and-keytabs-for-unravel.html" class="topic-link section original-topic" data-origin-id="UUID-0ea967e7-16b7-0350-bae1-f12eb8e21d82" data-permalink="unravel-4-0-4-1/advanced-topics/creating-active-directory-kerberos-principals-and-keytabs-for-unravel.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Creating Active Directory Kerberos Principals and Keytabs for Unravel</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/sensors.html" class="topic-link section original-topic" data-origin-id="UUID-c6fb86f3-512f-f5b6-b6c4-33d946c1ea3d" data-permalink="unravel-4-0-4-1/advanced-topics/sensors.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Sensors</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/workflows.html" class="topic-link section original-topic" data-origin-id="UUID-96d680d9-99cb-efd0-13d3-a95846cb6035" data-permalink="unravel-4-0-4-1/advanced-topics/workflows.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Workflows</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/custom-configurations.html" class="topic-link section original-topic" data-origin-id="UUID-be2d976c-3abf-a391-3c80-844c5ad6e61e" data-permalink="unravel-4-0-4-1/advanced-topics/custom-configurations.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Custom Configurations</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/connecting-to-a-hive-metastore.html" class="topic-link section original-topic" data-origin-id="UUID-36ff8b8d-6295-9064-2caf-1241cf6d9b41" data-permalink="unravel-4-0-4-1/advanced-topics/connecting-to-a-hive-metastore.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Connecting to a Hive Metastore</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/creating-an-aws-rds-cloudwatch-alarm-for-freestoragespace.html" class="topic-link section original-topic" data-origin-id="UUID-bf250233-025b-e35e-0db9-a61b9dc7696d" data-permalink="unravel-4-0-4-1/advanced-topics/creating-an-aws-rds-cloudwatch-alarm-for-freestoragespace.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Creating an AWS RDS CloudWatch Alarm for FreeStorageSpace</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/creating-application-tags.html" class="topic-link section original-topic" data-origin-id="UUID-3cbd1699-b834-2cfe-b7fd-8bfefa05631d" data-permalink="unravel-4-0-4-1/advanced-topics/creating-application-tags.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Creating Application Tags</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/troubleshooting.html" class="topic-link section original-topic" data-origin-id="UUID-944c26f0-d480-8847-cc52-3abdc9c64cec" data-permalink="unravel-4-0-4-1/advanced-topics/troubleshooting.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Troubleshooting</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/uninstalling-unravel-server.html" class="topic-link section original-topic" data-origin-id="UUID-52df0bc9-1443-3a27-b70b-f5a569410b3d" data-permalink="unravel-4-0-4-1/advanced-topics/uninstalling-unravel-server.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Uninstalling Unravel Server</a></li><li><a href="../../unravel-4-0-4-1/advanced-topics/upgrading-unravel-server.html" class="topic-link section original-topic" data-origin-id="UUID-a2b8f8bf-8edd-eb96-d2c5-64dc031e5a80" data-permalink="unravel-4-0-4-1/advanced-topics/upgrading-unravel-server.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29">Upgrading Unravel Server</a></li></ul></li><li><a href="../../unravel-4-0-4-1/release-notes--version-4-1-941.html" class="topic-link section original-topic" data-origin-id="UUID-64ad96d7-be99-d0cb-d940-f5a4060949d8" data-permalink="unravel-4-0-4-1/release-notes--version-4-1-941.html" data-topic-level="2" data-relative-prefix="../" data-time-modified="2019-01-29"><span class="glyphicon"></span> Release Notes: Version 4.1.941</a><ul><li><a href="../../unravel-4-0-4-1/release-notes--version-4-1-941.html#UUID-7cba538b-fd92-f5e0-3f38-b251ff6d1522_id_ReleaseNotesVersion41941-SoftwareVersion" class="topic-link section internal" data-origin-id="" data-time-modified="false">Software Version</a></li><li><a href="../../unravel-4-0-4-1/release-notes--version-4-1-941.html#UUID-7cba538b-fd92-f5e0-3f38-b251ff6d1522_id_ReleaseNotesVersion41941-NewFeatures" class="topic-link section internal" data-origin-id="" data-time-modified="false">New Features</a></li><li><a href="../../unravel-4-0-4-1/release-notes--version-4-1-941.html#UUID-7cba538b-fd92-f5e0-3f38-b251ff6d1522_id_ReleaseNotesVersion41941-TestedPlatforms" class="topic-link section internal" data-origin-id="" data-time-modified="false">Tested Platforms</a></li><li><a href="../../unravel-4-0-4-1/release-notes--version-4-1-941.html#UUID-7cba538b-fd92-f5e0-3f38-b251ff6d1522_id_ReleaseNotesVersion41941-ImprovementsBugfixes" class="topic-link section internal" data-origin-id="" data-time-modified="false">Improvements/Bugfixes</a></li><li><a href="../../unravel-4-0-4-1/release-notes--version-4-1-941.html#UUID-7cba538b-fd92-f5e0-3f38-b251ff6d1522_id_ReleaseNotesVersion41941-KnownIssues" class="topic-link section internal" data-origin-id="" data-time-modified="false">Known Issues</a></li></ul></li></ul></li></ul></aside><div class="site-content"><h1 class="publication-title">UN40 (Unravel 4.0-4.1)</h1><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="../../index-en.html">UN40 (Unravel 4.0-4.1)</a></li><li class="breadcrumb-link"><a href="../../unravel-4-0-4-1.html">Unravel 4.0-4.1</a></li><li class="breadcrumb-link"><a href="../installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-.html">Installation Guide for Cloudera Distribution Including Apache Hadoop (CDH), with Cloudera Manager (CM)</a></li><li class="breadcrumb-node">Part 2: Install Unravel Sensor Parcel on CDH+CM</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="part-1--install-unravel-server-on-cdh-cm.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="part-3--additional-topics-for-cdh.html">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="../../index-en.html">UN40 (Unravel 4.0-4.1)</a></li><li class="breadcrumb-link"><a href="../../unravel-4-0-4-1.html">Unravel 4.0-4.1</a></li><li class="breadcrumb-link"><a href="../installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-.html">Installation Guide for Cloudera Distribution Including Apache Hadoop (CDH), with Cloudera Manager (CM)</a></li><li class="breadcrumb-node">Part 2: Install Unravel Sensor Parcel on CDH+CM</li></ul></div><section xml:lang="en" dir="ltr" class="section original-topic" data-origin-id="UUID-6855ca6d-096b-8903-57cd-7b28a09e3419" data-permalink="unravel-4-0-4-1/installation-guide-for-cloudera-distribution-including-apache-hadoop--cdh-,-with-cloudera-manager--cm-/part-2--install-unravel-sensor-parcel-on-cdh-cm.html" data-topic-level="3" data-relative-prefix="../../" data-time-modified="2019-01-29" id="UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f"><div class="titlepage"><div><div class="title"><h4 class="title">Part 2: Install Unravel Sensor Parcel on CDH+CM</h4></div></div></div><section dir="ltr" class="section internal" data-origin-id="" data-time-modified="false" id="UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-_17zqoqqgx4oqIntroduction"><div class="titlepage"><div><div class="title"><h5 class="title">Introduction</h5></div></div></div><p>This topic explains how to install the Unravel Sensor 4.0 parcel on CDH clusters using Cloudera Manager (CM). The parcel includes Hive Hook and Spark instrumentation JARs. Hive Hook is used to collect information about Hive queries in Hadoop. The Spark instrumentation JARs measure Spark job performance.</p><p>These instructions apply to Unravel Sensor 4.0. For older versions of Unravel Server, contact Unravel Support.</p><p>Before following these instructions, follow the steps in <a class="link" href="part-1--install-unravel-server-on-cdh-cm.html" title="Part 1: Install Unravel Server on CDH+CM">Part 1: Install Unravel Server on CDH+CM</a>.</p><p>
            <span class="bold"><strong>Workflow Summary</strong></span>
          </p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Obtain and distribute the parcel from Unravel Server.</p></li><li class="step"><p>Put the Hive Hook JAR in AUX_CLASSPATH.</p></li><li class="step"><p>Configure the gateway automatic deployment of Hive instrumentation.</p></li><li class="step"><p>Configure the gateway automatic deployment of Spark instrumentation.</p></li></ol></div><div dir="ltr" class="note"><h3 class="title">Note</h3><p>Highlighted text below indicates where you must substitute your particular values.</p><p>When Active Directory Kerberos is used, <code class="code">UNRAVEL_HOST_IP</code> must be a fully qualified path.</p></div><p><span class="inlinemediaobject"><img src="../../image/15c4feff972490.png" alt="grey_arrow_down.png"></img></span>In this section...<span class="bold"><strong>Table of Contents</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <a class="link" href="part-2--install-unravel-sensor-parcel-on-cdh-cm.html#UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-_17zqoqqgx4oqIntroduction" title="Introduction">Introduction</a>
              </p></li><li class="listitem"><p>
                <a class="link" href="part-2--install-unravel-sensor-parcel-on-cdh-cm.html#UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-1ObtainandDistributetheParcelfromUnravelServer" title="1. Obtain and Distribute the Parcel from Unravel Server">1. Obtain and Distribute the Parcel from Unravel Server</a>
              </p></li><li class="listitem"><p>
                <a class="link" href="part-2--install-unravel-sensor-parcel-on-cdh-cm.html#UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-2PuttheHiveHookJARinAUX_CLASSPATH" title="2. Put the Hive Hook JAR in AUX_CLASSPATH">2. Put the Hive Hook JAR in AUX_CLASSPATH</a>
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                    <a class="link" href="part-2--install-unravel-sensor-parcel-on-cdh-cm.html#UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-IfSentryisEnabled" title="If Sentry is Enabled:">If Sentry is Enabled:</a>
                  </p></li></ul></div></li><li class="listitem"><p>
                <a class="link" href="part-2--install-unravel-sensor-parcel-on-cdh-cm.html#UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-3ConfiguretheGatewayAutomaticDeploymentofHiveInstrumentation" title="3. Configure the Gateway Automatic Deployment of Hive Instrumentation">3. Configure the Gateway Automatic Deployment of Hive Instrumentation</a>
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                    <a class="link" href="part-2--install-unravel-sensor-parcel-on-cdh-cm.html#UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-Setthehive-sitexmlSnippetinClouderaManagerandDeploytheHiveClientConfigurationtoGateways" title="Set the hive-site.xml Snippet in Cloudera Manager, and Deploy the Hive Client Configuration to Gateways">Set the hive-site.xml Snippet in Cloudera Manager, and Deploy the Hive Client Configuration to Gateways</a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="part-2--install-unravel-sensor-parcel-on-cdh-cm.html#UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-CheckUnravelWebUI" title="Check Unravel Web UI">Check Unravel Web UI</a>
                  </p></li></ul></div></li><li class="listitem"><p>
                <a class="link" href="part-2--install-unravel-sensor-parcel-on-cdh-cm.html#UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-4ConfiguretheGatewayAutomaticDeploymentofSparkInstrumentation" title="4. Configure the Gateway Automatic Deployment of Spark Instrumentation">4. Configure the Gateway Automatic Deployment of Spark Instrumentation</a>
              </p></li><li class="listitem"><p>
                5. Optional - Configure YARN - MapReduce (MR) JVM Sensor Cluster-Wide
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                    <a class="link" href="part-2--install-unravel-sensor-parcel-on-cdh-cm.html#UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-SetinClouderaManager" title="Set in Cloudera Manager">Set in Cloudera Manager</a>
                  </p></li></ul></div></li><li class="listitem"><p>
                <a class="link" href="part-2--install-unravel-sensor-parcel-on-cdh-cm.html#UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-_troubleshootingTroubleshooting" title="Troubleshooting">Troubleshooting</a>
              </p></li><li class="listitem"><p>
                <a class="link" href="part-2--install-unravel-sensor-parcel-on-cdh-cm.html#UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-References" title="References">References</a>
              </p></li></ul></div></section><section dir="ltr" class="section internal" data-origin-id="" data-time-modified="false" id="UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-1ObtainandDistributetheParcelfromUnravelServer"><div class="titlepage"><div><div class="title"><h5 class="title">1. Obtain and Distribute the Parcel from Unravel Server</h5></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In Cloudera Manager, go to the <span class="bold"><strong>Parcels</strong></span> page by clicking the parcels glyph (</p><div class="mediaobject"><table style="border: 0; width: 29px; cellpadding: 0; cellspacing: 0;" class="image-viewport"><tr style="height: 27px"><td><img style="max-width: 29px; max-height: 27px; " src="../../image/15c4feff977bde.png" alt="50689263.png"></img></td></tr></table></div><p>) on the top of the page.</p></li><li class="step"><p>Click <span class="bold"><strong>Configuration</strong></span> to see the <span class="bold"><strong>Parcel Settings</strong></span> pop-up.</p></li><li class="step"><p>In the <span class="bold"><strong>Remote Parcel Repository URLs</strong></span> section, click the <span class="bold"><strong>+</strong></span> glyph to add a new entry.</p></li><li class="step"><p>Add <code class="code">http://UNRAVEL_HOST_IP:3000/parcels/cdhX.Y/</code> (include trailing slash) where <code class="code">X.Y</code> is the major, minor version of CDH version you are running and <code class="code">UNRAVEL_HOST_IP</code> is the host name or LAN IP address of Unravel Server where <code class="code">unravel_lr</code> is running. If you are running more than one version of CDH (multiple clusters) in Cloudera Manager, you can add more than one parcel directory from the <code class="code">UNRAVEL_HOST_IP</code>.</p></li><li class="step"><p>Click <span class="bold"><strong>Save</strong></span>.</p></li><li class="step"><p>Click <span class="bold"><strong>Check for New Parcels</strong></span>.</p></li><li class="step"><p>On the <span class="bold"><strong>Parcels</strong></span> page, pick a target cluster in the <span class="bold"><strong>Location</strong></span> box.</p></li><li class="step"><p>In the list of <span class="bold"><strong>Parcel Names</strong></span>, find the <code class="code">UNRAVEL_SENSOR</code> parcel that matches the version of the target cluster and click <span class="bold"><strong>Download</strong></span>.</p></li><li class="step"><p>Click <span class="bold"><strong>Distribute</strong></span>.</p></li><li class="step"><p>If you have an old parcel from Unravel, you can deactivate it now.</p></li><li class="step"><p>Then click <span class="bold"><strong>Activate</strong></span> on the new parcel.</p></li></ol></div></section><section dir="ltr" class="section internal" data-origin-id="" data-time-modified="false" id="UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-2PuttheHiveHookJARinAUX_CLASSPATH"><div class="titlepage"><div><div class="title"><h5 class="title">2. Put the Hive Hook JAR in AUX_CLASSPATH</h5></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In Cloudera Manager, for the target cluster, click <span class="bold"><strong>Hive</strong></span> | <span class="bold"><strong>Configuration</strong></span>, and search for "hive-env" (without quotes).</p></li><li class="step"><p>In <span class="bold"><strong>Gateway Client Environment Advanced Configuration Snippet (Safety Valve)</strong></span> for <code class="code">hive-env.sh</code> enter the following:</p><pre class="programlisting">AUX_CLASSPATH=${AUX_CLASSPATH}:/opt/cloudera/parcels/UNRAVEL_SENSOR/lib/java/unravel_hive_hook.jar</pre></li></ol></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In Cloudera Manager, click <span class="bold"><strong>YARN</strong></span> | <span class="bold"><strong>Configuration</strong></span>, and search for "hadoop-env" (without quotes).</p></li><li class="step"><p>In <span class="bold"><strong>Gateway Client Environment Advanced Configuration Snippet (Safety Valve)</strong></span> for <code class="code">hadoop-env.sh</code>, enter the following:</p><pre class="programlisting">HADOOP_CLASSPATH=${HADOOP_CLASSPATH}:/opt/cloudera/parcels/UNRAVEL_SENSOR/lib/java/unravel_hive_hook.jar</pre></li></ol></div><h6 id="UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-IfSentryisEnabled" class="bridgehead">If Sentry is Enabled:</h6><p>Sentry commands may also be needed to enable access to the Hive Hook JAR file. Grant privileges on the JAR files to the roles that run hive queries. Log into Beeline as user <code class="code">hive</code> and use the Hive <code class="code">SQL GRANT</code> statement to do so. For example (substitute <code class="code">$ROLE</code> as appropriate):</p><pre class="programlisting">GRANT ALL ON URI 'file:///opt/cloudera/parcels/UNRAVEL_SENSOR/lib/java/unravel_hive_hook.jar' TO ROLE $ROLE</pre></section><section dir="ltr" class="section internal" data-origin-id="" data-time-modified="false" id="UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-3ConfiguretheGatewayAutomaticDeploymentofHiveInstrumentation"><div class="titlepage"><div><div class="title"><h5 class="title">3. Configure the Gateway Automatic Deployment of Hive Instrumentation</h5></div></div></div><p>Use Cloudera Manager to deploy the <code class="code">hive-site.xml</code> snippet, which is the content of <code class="code">/usr/local/unravel/hive-hook/hive-site.xml.snip</code> on Unravel Server.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>
              Note: On a multi-host Unravel Server deployment, use host2's <code class="code">/usr/local/unravel/hive-hook/hive-site.xml.snip</code></p></div><h6 id="UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-Setthehive-sitexmlSnippetinClouderaManagerandDeploytheHiveClientConfigurationtoGateways" class="bridgehead">Set the hive-site.xml Snippet in Cloudera Manager, and Deploy the Hive Client Configuration to Gateways</h6><p>In Cloudera Manager (CM):</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Go to Hive service.</p></li><li class="step"><p>Select the <span class="bold"><strong>Configuration</strong></span> tab.</p></li><li class="step"><p>Search for <code class="code">hive-site.xml</code> in the middle of the page.</p></li><li class="step"><p>Add the xml snippet to <span class="bold"><strong>Hive Client Advanced Configuration Snippet for hive-site.xml</strong></span> (Gateway Default Group) (Click <span class="bold"><strong>View as XML</strong></span>).  </p><div dir="ltr" class="warning"><h3 class="title">Warning</h3><p>If cluster has been configured with "Cloudera Navigator"; the <span class="italic">hive.exec.post.hooks</span> property should has exsiting value(s). Therefore append the unravel's value into the existing <span class="italic">hive.exec.post.hooks</span> property with a comma and no space. (see example below) </p><p><span class="italic">com.cloudera.navigator.audit.hive.HiveExecHookContext,org.apache.hadoop.hive.ql.hooks.LineageLogger</span>,<span class="bold"><strong>com.unraveldata.dataflow.hive.hook.HivePostHook</strong></span></p></div><div class="mediaobject"><img src="../../image/15c4feff97a3fb.png" alt="56328270.png"></img></div></li><li class="step"><p>Add the xml snippet to <span class="bold"><strong>HiveServer2 Advanced Configuration Snippet for hive-site.xml</strong></span>. (Click <span class="bold"><strong>View as XML</strong></span>).  Like above step, if properties exists, append unravel's value.</p></li><li class="step"><p>Save the changes with optional comment "Unravel snippet in hive-site.xml".</p></li><li class="step"><p>Perform action <span class="bold"><strong>Deploy Hive Client Configuration</strong></span> by clicking the deploy glyph (</p><div class="mediaobject"><table style="border: 0; width: 28px; cellpadding: 0; cellspacing: 0;" class="image-viewport"><tr style="height: 28px"><td><img style="max-width: 28px; max-height: 28px; " src="../../image/15c4feff97cefb.png" alt="50689269.png"></img></td></tr></table></div><p>) or by using the <span class="bold"><strong>Actions</strong></span> pull-down menu.</p></li><li class="step"><p>Restart the Hive and YARN services (click <span class="bold"><strong>Restart Stale Services</strong></span> if that is visible.)</p></li></ol></div><p>
          Again, monitor the situation to see if all Hive queries are failing with a class not found or permission problems. <span class="bold"><strong>If they are failing</strong></span>, you can back-out the <code class="code">hive-site.xml</code> advanced snippet changes in Cloudera Manager, deploy client configuration, and restart the Hive service to revert, then refer to Troubleshooting below.</p><h6 id="UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-CheckUnravelWebUI" class="bridgehead">Check Unravel Web UI</h6><p>If queries are running fine and appearing in Unravel Web UI, then you are done.</p></section><section dir="ltr" class="section internal" data-origin-id="" data-time-modified="false" id="UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-4ConfiguretheGatewayAutomaticDeploymentofSparkInstrumentation"><div class="titlepage"><div><div class="title"><h5 class="title">4. Configure the Gateway Automatic Deployment of Spark Instrumentation</h5></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In Cloudera Manager, select the target cluster, then select the Spark service.</p></li><li class="step"><p>Select <span class="bold"><strong>Configuration</strong></span>.</p></li><li class="step"><p>Search for "spark-defaults".</p></li><li class="step"><p>In the <span class="bold"><strong>Spark Client Advanced Configuration Snippet (Safety Valve)</strong></span> box for <span class="bold"><strong>spark-conf/spark-defaults.conf</strong></span>, enter the following text, substituting the highlighted text for your particular values:</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>On a multi-host Unravel Server deployment, use logical host2 for<code class="code">UNRAVEL_HOST_IP</code>.</p></div><div dir="ltr" class="warning"><h3 class="title">Warning</h3><p>Copy the text below and paste it into the Cloudera Manager's <span class="bold"><strong>Spark Client Advanced Configuration Snippet (Safety Valve)</strong></span> box for <span class="bold"><strong>spark-conf/spark-defaults.conf</strong></span>. Then, modify the value of <code class="code">UNRAVEL_HOST_IP</code>. Do not paste this text into the machine's Linux shell.</p></div><pre class="programlisting">spark.unravel.server.hostport=UNRAVEL_HOST_IP:4043 
 
spark.driver.extraJavaOptions=-javaagent:/opt/cloudera/parcels/UNRAVEL_SENSOR/lib/java/btrace-agent.jar=bootClassPath=/opt/cloudera/parcels/UNRAVEL_SENSOR/lib/java/unravel-boot.jar,systemClassPath=/opt/cloudera/parcels/UNRAVEL_SENSOR/lib/java/unravel-sys.jar,scriptOutputFile=/dev/null,script=DriverProbe.class:SQLProbe.class -Dcom.sun.btrace.FileClient.flush=-1 -Dcom.unraveldata.spark.sensor.disableLiveUpdates=true 
 
spark.executor.extraJavaOptions=-javaagent:/opt/cloudera/parcels/UNRAVEL_SENSOR/lib/java/btrace-agent.jar=bootClassPath=/opt/cloudera/parcels/UNRAVEL_SENSOR/lib/java/unravel-boot.jar,systemClassPath=/opt/cloudera/parcels/UNRAVEL_SENSOR/lib/java/unravel-sys.jar,scriptOutputFile=/dev/null,script=ExecutorProbe.class -Dcom.sun.btrace.FileClient.flush=-1 
 
spark.eventLog.enabled=true</pre><p>Notice that in this code block, the blank lines separate only one full line of text that is wrapped due to length. </p></li></ol></div><p>5. Save changes.</p><p>6. Deploy client configuration by clicking the deploy glyph (<span class="inlinemediaobject"><img style="max-width: 28px; max-height: 28px; " src="../../image/15c4feff97cefb.png" alt="50689269.png"></img></span>) or by using the <span class="bold"><strong>Actions</strong></span> pull-down menu.</p><div dir="ltr" class="warning"><h3 class="title">Warning</h3><p>Monitor the situation to see if all Spark queries are failing with a class not found or permission problems. <span class="bold"><strong>If they are failing</strong></span>, you can back-out the <code class="code">spark-defaults.conf</code> changes in Cloudera Manager, re-deploy client configuration, and then investigate and fix the issue.</p></div></section><section dir="ltr" class="section internal" data-origin-id="" data-time-modified="false" id="UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-ConfigureJVMSensorForYARN5Optional-ConfigureYARN-MapReduceMRJVMSensorCluster-Wide"><div class="titlepage"><div><div class="title"><h5 class="title">5. Optional - Configure YARN - MapReduce (MR) JVM Sensor Cluster-Wide</h5></div></div></div><h6 id="UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-SetinClouderaManager" class="bridgehead">Set in Cloudera Manager</h6><p>In Cloudera Manager (CM):</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Go to <span class="bold"><strong>YARN</strong></span> service.</p></li><li class="step"><p>Select the <span class="bold"><strong>Configuration</strong></span> tab.</p></li><li class="step"><p>Search for <span class="bold"><strong>ApplicationMaster Java Opts Base</strong></span>and concatenate the following xml block properties snippet (ensure to start with a space and add below<span class="bold"><strong>).</strong></span></p><pre class="programlisting"> -javaagent:/opt/cloudera/parcels/UNRAVEL_SENSOR/lib/java/btrace-agent.jar=systemClassPath=/opt/cloudera/parcels/UNRAVEL_SENSOR/lib/java/unravel-mr-sys.jar,bootClassPath=/opt/cloudera/parcels/UNRAVEL_SENSOR/lib/java/unravel-mr-boot.jar,scriptOutputFile=/dev/null  -Dcom.sun.btrace.FileClient.flush=-1 -Dunravel.server.hostport=UNRAVEL_HOST_IP:4043</pre><p>Notice that in this code block, ensure "-" is a minus sign and customer need to modify the value of <code class="code">UNRAVEL_HOST_IP</code> with their own Unravel server IP address.  For multi-host Unravel installation, use the IP address of Host2.</p></li><li class="step"><p>Search for <span class="bold"><strong>MapReduce Client Advanced Configuration Snippet (Safety Valve) for mapred-site.xml</strong></span> in the middle of the page.</p></li><li class="step"><p>Enter following xml four block properties snippet to <span class="bold"><strong>Gateway Default Group</strong></span>  (Click <span class="bold"><strong>View as XML</strong></span>).</p></li></ol></div><pre class="programlisting">&lt;property&gt;&lt;name&gt;mapreduce.task.profile&lt;/name&gt;&lt;value&gt;true&lt;/value&gt;&lt;/property&gt;
&lt;property&gt;&lt;name&gt;mapreduce.task.profile.maps&lt;/name&gt;&lt;value&gt;0-5&lt;/value&gt;&lt;/property&gt;
&lt;property&gt;&lt;name&gt;mapreduce.task.profile.reduces&lt;/name&gt;&lt;value&gt;0-5&lt;/value&gt;&lt;/property&gt;
&lt;property&gt;&lt;name&gt;mapreduce.task.profile.params&lt;/name&gt;&lt;value&gt;-javaagent:/opt/cloudera/parcels/UNRAVEL_SENSOR/lib/java/btrace-agent.jar=systemClassPath=/opt/cloudera/parcels/UNRAVEL_SENSOR/lib/java/unravel-mr-sys.jar,bootClassPath=/opt/cloudera/parcels/UNRAVEL_SENSOR/lib/java/unravel-mr-boot.jar,scriptOutputFile=/dev/null  -Dcom.sun.btrace.FileClient.flush=-1 -Dunravel.server.hostport=UNRAVEL_HOST_IP:4043&lt;/value&gt;&lt;/property&gt;</pre><p>Notice that in this code block, ensure "-" is a minus sign and customer need to modify the value of<code class="code">UNRAVEL_HOST_IP</code> with their own Unravel server IP address.  For multi-host Unravel installation, use the IP address of Host2.</p><p>6. Save changes.</p><p>7. Deploy client configuration by clicking the deploy glyph (<span class="inlinemediaobject"><img style="max-width: 28px; max-height: 28px; " src="../../image/15c4feff97cefb.png" alt="50689269.png"></img></span>) or by using the <span class="bold"><strong>Actions</strong></span> pull-down menu.</p><p>8. Restart the YARN services (click <span class="bold"><strong>Restart Stale Services</strong></span> if that is visible. However, you can also perform this later when you have a planned maintenance)</p><div dir="ltr" class="tip"><h3 class="title">Tip</h3><p>Monitor the situation and you should see in Unravel UI a Resource Usage tab showing you mappers and reducers when you view the Application page for any completed MRjob.  Restart is important for MR sensor to be picked up by queries submitted via Hiveserver2.</p></div></section><section dir="ltr" class="section internal" data-origin-id="" data-time-modified="false" id="UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-_troubleshootingTroubleshooting"><div class="titlepage"><div><div class="title"><h5 class="title">Troubleshooting</h5></div></div></div><div class="informaltable table-responsive"><table class="informaltable table-bordered"><colgroup>
              <col></col>
              <col></col>
              <col></col>
            </colgroup><tbody><tr>
                <td class="td">
                  <p>
                    <span class="bold"><strong>Symptom</strong></span>
                  </p>
                </td>
                <td class="td">
                  <p>
                    <span class="bold"><strong>Problem</strong></span>
                  </p>
                </td>
                <td class="td">
                  <p>
                    <span class="bold"><strong>Remedy</strong></span>
                  </p>
                </td>
              </tr><tr>
                <td class="td">
                  <p>
                    <code class="code">hadoop fs -ls /user/unravel/HOOK_RESULT_DIR/</code>
                  </p>
                  <p>
                    shows directory does not exist</p>
                </td>
                <td class="td">
                  <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Unravel Server RPM is not yet installed, or</p></li><li class="listitem"><p>Unravel Server RPM is installed on a different HDFS cluster, or</p></li><li class="listitem"><p>HDFS home directory for Unravel does not exist, or</p></li><li class="listitem"><p>kerberos/sentry actions are needed</p></li></ul></div>
                </td>
                <td class="td">
                  <p>Install Unravel RPM on Unravel service host:</p>
                  <p>
                    <code class="code">sudo rpm -U unravel*.rpm*</code>
                  </p>
                  <p>
                    OR</p>
                  <p>
                    Verify that <code class="code">unravel</code> user exists and has a <code class="code">/user/unravel/</code> directory in HDFS and unravel has write access.</p>
                </td>
              </tr><tr>
                <td class="td">
                  <p><code class="code">ClassNotFound</code> error for <code class="code">com.unraveldata.dataflow.hive.hook.HivePreHook</code> during Hive query execution</p>
                </td>
                <td class="td">
                  <p>Unravel hive hook JAR was not found in in <code class="code">$HIVE_HOME/lib/</code>.</p>
                </td>
                <td class="td">
                  <p>Check whether UNRAVEL_SENSOR parcel was distributed and activated in CM.</p>
                  <p>
                    OR</p>
                  <p>
                    Put the Unravel hive-hook JAR corresponding to <code class="code">$HIVE_VER</code> in <code class="code">JAR_DEST</code> on each gateway by:</p>
                  <p>
                    <code class="code">cd /usr/local/unravel/hive-hook/;</code>
                  </p>
                  <p>
                    <code class="code">cp unravel-hive-HIVE_VER*hook.jar JAR_DEST</code>
                  </p>
                </td>
              </tr><tr>
                <td class="td">
                  <p>Permission denied writing to <code class="code">hdfs://user/unravel/HOOK_RESULT_DIR</code> during Hive query execution</p>
                </td>
                <td class="td">
                  <p><code class="code">hdfs://user/unravel/HOOK_RESULT_DIR/*</code> directories are not writable</p>
                </td>
                <td class="td">
                  <p>
                    <code class="code">hadoop fs -chmod 777 /user/unravel/HOOK_RESULT_DIR/*</code>
                  </p>
                  <p>
                    OR</p>
                  <p>
                    Sentry command is needed to give permission</p>
                  <p>
                    OR</p>
                  <p>
                    revert to your previous <code class="code">hive-site.xml</code> without Unravel Hive Hook clauses.</p>
                </td>
              </tr></tbody></table></div></section><section dir="ltr" class="section internal" data-origin-id="" data-time-modified="false" id="UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-References"><div class="titlepage"><div><div class="title"><h5 class="title">References</h5></div></div></div><p><a class="link" href="../../">{+}</a><a class="link" href="../../">http://www.cloudera.com/documentation/enterprise/5-3-x/topics/cm_mc_hive_udf.html#concept_nc3_mms_lr_unique_2+</a> see Creating Permanent Functions.</p></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In this section<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f">Part 2: Install Unravel Sensor Parcel on CDH+CM</a></li><li><a href="#UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-_17zqoqqgx4oqIntroduction">Introduction</a></li><li><a href="#UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-1ObtainandDistributetheParcelfromUnravelServer">1. Obtain and Distribute the Parcel from Unravel Server</a></li><li><a href="#UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-2PuttheHiveHookJARinAUX_CLASSPATH">2. Put the Hive Hook JAR in AUX_CLASSPATH</a></li><li><a href="#UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-3ConfiguretheGatewayAutomaticDeploymentofHiveInstrumentation">3. Configure the Gateway Automatic Deployment of Hive Instrumentation</a></li><li><a href="#UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-4ConfiguretheGatewayAutomaticDeploymentofSparkInstrumentation">4. Configure the Gateway Automatic Deployment of Spark Instrumentation</a></li><li><a href="#UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-ConfigureJVMSensorForYARN5Optional-ConfigureYARN-MapReduceMRJVMSensorCluster-Wide">5. Optional - Configure YARN - MapReduce (MR) JVM Sensor Cluster-Wide</a></li><li><a href="#UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-_troubleshootingTroubleshooting">Troubleshooting</a></li><li><a href="#UUID-e73e92c5-20c5-afb0-da7f-a176de44d51f_id_Part2InstallUnravelSensorParcelonCDHCM-References">References</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div class="voting-title">Was this helpful?</div><div class="btn-group btn-group-toggle" data-toggle="buttons"><button id="feedback-yes-btn" class="btn">Yes</button><button id="feedback-no-btn" class="btn">No</button></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="part-1--install-unravel-server-on-cdh-cm.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="part-3--additional-topics-for-cdh.html">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2019 Unravel Data Inc. </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">2019-01-29</span></div></div></footer></div></div></div></div></body></html>
